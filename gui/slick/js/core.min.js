var srRoot=getMeta("srRoot"),themeSpinner=getMeta("themeSpinner"),anonURL=getMeta("anonURL"),topImageHtml='<img src="'+srRoot+'/images/top.gif" width="31" height="11" alt="Jump to top" />',loading='<img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif" height="16" width="16" />';var configSuccess=function(){$(".config_submitter").each(function(){$(this).removeAttr("disabled");$(this).next().remove();$(this).show()});$(".config_submitter_refresh").each(function(){$(this).removeAttr("disabled");$(this).next().remove();$(this).show();window.location.href=srRoot+"/config/providers/"});$("#email_show").trigger("notify");$("#prowl_show").trigger("notify")};function metaToBool(a){var b=$('meta[data-var="'+a+'"]').data("content");if(b===undefined){console.log(a+" is empty, did you forget to add this to main.mako?");return b}else{b=(isNaN(b)?b.toLowerCase():b.toString());return !(b==="false"||b==="none"||b==="0")}}function getMeta(a){return $('meta[data-var="'+a+'"]').data("content")}function isMeta(b,a){var c=new RegExp(a.length>1?a.join("|"):a);return(c).test($('meta[data-var="'+b+'"]').data("content"))}var SICKRAGE={common:{init:function(){$.confirm.options={confirmButton:"Yes",cancelButton:"Cancel",dialogClass:"modal-dialog",post:false,confirm:function(a){location.href=a.context.href}};$("a.shutdown").confirm({title:"Shutdown",text:"Are you sure you want to shutdown SickRage?"});$("a.restart").confirm({title:"Restart",text:"Are you sure you want to restart SickRage?"});$("a.removeshow").confirm({title:"Remove Show",text:'Are you sure you want to remove <span class="footerhighlight">'+$("#showtitle").data("showname")+'</span> from the database?<br><br><input type="checkbox" id="deleteFiles"> <span class="red-text">Check to delete files as well. IRREVERSIBLE</span></input>',confirm:function(a){location.href=a.context.href+($("#deleteFiles")[0].checked?"&full=1":"")}});$("a.clearhistory").confirm({title:"Clear History",text:"Are you sure you want to clear all download history?"});$("a.trimhistory").confirm({title:"Trim History",text:"Are you sure you want to trim all download history older than 30 days?"});$("a.submiterrors").confirm({title:"Submit Errors",text:'Are you sure you want to submit these errors ?<br><br><span class="red-text">Make sure SickRage is updated and trigger<br> this error with debug enabled before submitting</span>'});$("#config-components").tabs({activate:function(b,c){var a=$(this).data("lastOpenedPanel");if(!a){a=$(c.oldPanel)}if(!$(this).data("topPositionTab")){$(this).data("topPositionTab",$(c.newPanel).position().top)}$(c.newPanel).hide().fadeIn(0);if(a){a.toggleClass("ui-tabs-hide").css("position","absolute").css("top",$(this).data("topPositionTab")+"px").fadeOut(0,function(){$(this).css("position","")})}$(this).data("lastOpenedPanel",$(c.newPanel))}});if((navigator.maxTouchPoints||0)<2){$(".dropdown-toggle").on("click",function(){var a=$(this);if(a.attr("aria-expanded")==="true"){window.location.href=a.attr("href")}})}if(metaToBool("sickbeard.FUZZY_DATING")){$.timeago.settings.allowFuture=true;$.timeago.settings.strings={prefixAgo:null,prefixFromNow:"In ",suffixAgo:"ago",suffixFromNow:"",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years",wordSeparator:" ",numbers:[]};$("[datetime]").timeago()}$(document.body).on("click","a[data-no-redirect]",function(a){a.preventDefault();$.get($(this).attr("href"));return false});$(document.body).on("click",".bulkCheck",function(){var b=this;var a=$(b).attr("id");$("."+a+":visible").each(function(){$(this).prop("checked",$(b).prop("checked"))})})}},config:{init:function(){$("#config-components").tabs();$(".enabler").each(function(){if(!$(this).prop("checked")){$("#content_"+$(this).attr("id")).hide()}});$(".enabler").on("click",function(){if($(this).prop("checked")){$("#content_"+$(this).attr("id")).fadeIn("fast","linear")}else{$("#content_"+$(this).attr("id")).fadeOut("fast","linear")}});$(".viewIf").on("click",function(){if($(this).prop("checked")){$(".hide_if_"+$(this).attr("id")).css("display","none");$(".show_if_"+$(this).attr("id")).fadeIn("fast","linear")}else{$(".show_if_"+$(this).attr("id")).css("display","none");$(".hide_if_"+$(this).attr("id")).fadeIn("fast","linear")}});$(".datePresets").on("click",function(){var a=$("#date_presets").val();if($(this).prop("checked")&&"%x"===a){a="%a, %b %d, %Y";$("#date_use_system_default").html("1")}else{if(!$(this).prop("checked")&&"1"===$("#date_use_system_default").html()){a="%x"}}$("#date_presets").attr("name","date_preset_old");$("#date_presets").attr("id","date_presets_old");$("#date_presets_na").attr("name","date_preset");$("#date_presets_na").attr("id","date_presets");$("#date_presets_old").attr("name","date_preset_na");$("#date_presets_old").attr("id","date_presets_na");if(a){$("#date_presets").val(a)}});$("#configForm").ajaxForm({beforeSubmit:function(){$(".config_submitter .config_submitter_refresh").each(function(){$(this).attr("disabled","disabled");$(this).after('<span><img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif"> Saving...</span>');$(this).hide()})},success:function(){setTimeout(function(){configSuccess()},2000)}});$("#api_key").on("click",function(){$("#api_key").select()});$("#generate_new_apikey").on("click",function(){$.get(srRoot+"/config/general/generateApiKey",function(a){if(a.error!==undefined){alert(a.error);return}$("#api_key").val(a)})});$("#branchCheckout").on("click",function(){var a=srRoot+"/home/branchCheckout?branch="+$("#branchVersion").val();var b=srRoot+"/home/getDBcompare";$.getJSON(b,function(c){if(c.status==="success"){if(c.message==="equal"){window.location.href=a}if(c.message==="upgrade"){if(confirm("Changing branch will upgrade your database.\nYou won't be able to downgrade afterward.\nDo you want to continue?")){window.location.href=a}}if(c.message==="downgrade"){alert("Can't switch branch as this will result in a database downgrade.")}}})})},index:function(){if($("input[name='proxy_setting']").val().length===0){$("input[id='proxy_indexers']").prop("checked",false);$("label[for='proxy_indexers']").hide()}$("input[name='proxy_setting']").on("input",function(){if($(this).val().length===0){$("input[id='proxy_indexers']").prop("checked",false);$("label[for='proxy_indexers']").hide()}else{$("label[for='proxy_indexers']").show()}});$("#log_dir").fileBrowser({title:"Select log file folder location"})},backupRestore:function(){$("#Backup").on("click",function(){$("#Backup").attr("disabled",true);$("#Backup-result").html(loading);var a=$("#backupDir").val();$.get(srRoot+"/config/backuprestore/backup",{backupDir:a}).done(function(b){$("#Backup-result").html(b);$("#Backup").attr("disabled",false)})});$("#Restore").on("click",function(){$("#Restore").attr("disabled",true);$("#Restore-result").html(loading);var a=$("#backupFile").val();$.get(srRoot+"/config/backuprestore/restore",{backupFile:a}).done(function(b){$("#Restore-result").html(b);$("#Restore").attr("disabled",false)})});$("#backupDir").fileBrowser({title:"Select backup folder to save to",key:"backupPath"});$("#backupFile").fileBrowser({title:"Select backup files to restore",key:"backupFile",includeFiles:1});$("#config-components").tabs()},notifications:function(){$("#testGrowl").on("click",function(){var c={};c.host=$.trim($("#growl_host").val());c.password=$.trim($("#growl_password").val());if(!c.host){$("#testGrowl-result").html("Please fill out the necessary fields above.");$("#growl_host").addClass("warning");return}$("#growl_host").removeClass("warning");$(this).prop("disabled",true);$("#testGrowl-result").html(loading);$.get(srRoot+"/home/testGrowl",{host:c.host,password:c.password}).done(function(d){$("#testGrowl-result").html(d);$("#testGrowl").prop("disabled",false)})});$("#testProwl").on("click",function(){var c={};c.api=$.trim($("#prowl_api").val());c.priority=$("#prowl_priority").val();if(!c.api){$("#testProwl-result").html("Please fill out the necessary fields above.");$("#prowl_api").addClass("warning");return}$("#prowl_api").removeClass("warning");$(this).prop("disabled",true);$("#testProwl-result").html(loading);$.get(srRoot+"/home/testProwl",{prowl_api:c.api,prowl_priority:c.priority}).done(function(d){$("#testProwl-result").html(d);$("#testProwl").prop("disabled",false)})});$("#testKODI").on("click",function(){var c={};c.host=$.trim($("#kodi_host").val());c.username=$.trim($("#kodi_username").val());c.password=$.trim($("#kodi_password").val());if(!c.host){$("#testKODI-result").html("Please fill out the necessary fields above.");$("#kodi_host").addClass("warning");return}$("#kodi_host").removeClass("warning");$(this).prop("disabled",true);$("#testKODI-result").html(loading);$.get(srRoot+"/home/testKODI",{host:c.host,username:c.username,password:c.password}).done(function(d){$("#testKODI-result").html(d);$("#testKODI").prop("disabled",false)})});$("#testPMC").on("click",function(){var c={};c.client={};c.client.host=$.trim($("#plex_host").val());c.client.username=$.trim($("#plex_client_username").val());c.client.password=$.trim($("#plex_client_password").val());if(!c.host){$("#testPMC-result").html("Please fill out the necessary fields above.");$("#plex_host").addClass("warning");return}$("#plex_host").removeClass("warning");$(this).prop("disabled",true);$("#testPMC-result").html(loading);$.get(srRoot+"/home/testPMC",{host:c.client.host,username:c.client.username,password:c.client.password}).done(function(d){$("#testPMC-result").html(d);$("#testPMC").prop("disabled",false)})});$("#testPMS").on("click",function(){var c={};c.server={};c.server.host=$.trim($("#plex_server_host").val());c.username=$.trim($("#plex_username").val());c.password=$.trim($("#plex_password").val());c.server.token=$.trim($("#plex_server_token").val());if(!c.server.host){$("#testPMS-result").html("Please fill out the necessary fields above.");$("#plex_server_host").addClass("warning");return}$("#plex_server_host").removeClass("warning");$(this).prop("disabled",true);$("#testPMS-result").html(loading);$.get(srRoot+"/home/testPMS",{host:c.server.host,username:c.username,password:c.password,plex_server_token:c.server.token}).done(function(d){$("#testPMS-result").html(d);$("#testPMS").prop("disabled",false)})});$("#testEMBY").on("click",function(){var c={};c.host=$("#emby_host").val();c.apikey=$("#emby_apikey").val();if(!c.host||!c.apikey){$("#testEMBY-result").html("Please fill out the necessary fields above.");if(!c.host){$("#emby_host").addClass("warning")}else{$("#emby_host").removeClass("warning")}if(!c.apikey){$("#emby_apikey").addClass("warning")}else{$("#emby_apikey").removeClass("warning")}return}$("#emby_host,#emby_apikey").removeClass("warning");$(this).prop("disabled",true);$("#testEMBY-result").html(loading);$.get(srRoot+"/home/testEMBY",{host:c.host,emby_apikey:c.apikey}).done(function(d){$("#testEMBY-result").html(d);$("#testEMBY").prop("disabled",false)})});$("#testBoxcar2").on("click",function(){var c={};c.accesstoken=$.trim($("#boxcar2_accesstoken").val());if(!c.accesstoken){$("#testBoxcar2-result").html("Please fill out the necessary fields above.");$("#boxcar2_accesstoken").addClass("warning");return}$("#boxcar2_accesstoken").removeClass("warning");$(this).prop("disabled",true);$("#testBoxcar2-result").html(loading);$.get(srRoot+"/home/testBoxcar2",{accesstoken:c.accesstoken}).done(function(d){$("#testBoxcar2-result").html(d);$("#testBoxcar2").prop("disabled",false)})});$("#testPushover").on("click",function(){var c={};c.userkey=$("#pushover_userkey").val();c.apikey=$("#pushover_apikey").val();if(!c.userkey||!c.apikey){$("#testPushover-result").html("Please fill out the necessary fields above.");if(!c.userkey){$("#pushover_userkey").addClass("warning")}else{$("#pushover_userkey").removeClass("warning")}if(!c.apikey){$("#pushover_apikey").addClass("warning")}else{$("#pushover_apikey").removeClass("warning")}return}$("#pushover_userkey,#pushover_apikey").removeClass("warning");$(this).prop("disabled",true);$("#testPushover-result").html(loading);$.get(srRoot+"/home/testPushover",{userKey:c.userkey,apiKey:c.apikey}).done(function(d){$("#testPushover-result").html(d);$("#testPushover").prop("disabled",false)})});$("#testLibnotify").on("click",function(){$("#testLibnotify-result").html(loading);$.get(srRoot+"/home/testLibnotify",function(c){$("#testLibnotify-result").html(c)})});$("#twitterStep1").on("click",function(){$("#testTwitter-result").html(loading);$.get(srRoot+"/home/twitterStep1",function(c){window.open(c)}).done(function(){$("#testTwitter-result").html("<b>Step1:</b> Confirm Authorization")})});$("#twitterStep2").on("click",function(){var c={};c.key=$.trim($("#twitter_key").val());if(!c.key){$("#testTwitter-result").html("Please fill out the necessary fields above.");$("#twitter_key").addClass("warning");return}$("#twitter_key").removeClass("warning");$("#testTwitter-result").html(loading);$.get(srRoot+"/home/twitterStep2",{key:c.key},function(d){$("#testTwitter-result").html(d)})});$("#testTwitter").on("click",function(){$.get(srRoot+"/home/testTwitter",function(c){$("#testTwitter-result").html(c)})});$("#settingsNMJ").on("click",function(){var c={};if(!$("#nmj_host").val()){alert("Please fill in the Popcorn IP address");$("#nmj_host").focus();return}$("#testNMJ-result").html(loading);c.host=$("#nmj_host").val();$.get(srRoot+"/home/settingsNMJ",{host:c.host},function(e){if(e===null){$("#nmj_database").removeAttr("readonly");$("#nmj_mount").removeAttr("readonly")}var d=$.parseJSON(e);$("#testNMJ-result").html(d.message);$("#nmj_database").val(d.database);$("#nmj_mount").val(d.mount);if(d.database){$("#nmj_database").attr("readonly",true)}else{$("#nmj_database").removeAttr("readonly")}if(d.mount){$("#nmj_mount").attr("readonly",true)}else{$("#nmj_mount").removeAttr("readonly")}})});$("#testNMJ").on("click",function(){var c={};c.host=$.trim($("#nmj_host").val());c.database=$("#nmj_database").val();c.mount=$("#nmj_mount").val();if(!c.host){$("#testNMJ-result").html("Please fill out the necessary fields above.");$("#nmj_host").addClass("warning");return}$("#nmj_host").removeClass("warning");$(this).prop("disabled",true);$("#testNMJ-result").html(loading);$.get(srRoot+"/home/testNMJ",{host:c.host,database:c.database,mount:c.mount}).done(function(d){$("#testNMJ-result").html(d);$("#testNMJ").prop("disabled",false)})});$("#settingsNMJv2").on("click",function(){var e={};if(!$("#nmjv2_host").val()){alert("Please fill in the Popcorn IP address");$("#nmjv2_host").focus();return}$("#testNMJv2-result").html(loading);e.host=$("#nmjv2_host").val();e.dbloc="";var f=document.getElementsByName("nmjv2_dbloc");for(var d=0,c=f.length;d<c;d++){if(f[d].checked){e.dbloc=f[d].value;break}}e.dbinstance=$("#NMJv2db_instance").val();$.get(srRoot+"/home/settingsNMJv2",{host:e.host,dbloc:e.dbloc,instance:e.dbinstance},function(h){if(h===null){$("#nmjv2_database").removeAttr("readonly")}var g=$.parseJSON(h);$("#testNMJv2-result").html(g.message);$("#nmjv2_database").val(g.database);if(g.database){$("#nmjv2_database").attr("readonly",true)}else{$("#nmjv2_database").removeAttr("readonly")}})});$("#testNMJv2").on("click",function(){var c={};c.host=$.trim($("#nmjv2_host").val());if(!c.host){$("#testNMJv2-result").html("Please fill out the necessary fields above.");$("#nmjv2_host").addClass("warning");return}$("#nmjv2_host").removeClass("warning");$(this).prop("disabled",true);$("#testNMJv2-result").html(loading);$.get(srRoot+"/home/testNMJv2",{host:c.host}).done(function(d){$("#testNMJv2-result").html(d);$("#testNMJv2").prop("disabled",false)})});$("#testFreeMobile").on("click",function(){var c={};c.id=$.trim($("#freemobile_id").val());c.apikey=$.trim($("#freemobile_apikey").val());if(!c.id||!c.apikey){$("#testFreeMobile-result").html("Please fill out the necessary fields above.");if(!c.id){$("#freemobile_id").addClass("warning")}else{$("#freemobile_id").removeClass("warning")}if(!c.apikey){$("#freemobile_apikey").addClass("warning")}else{$("#freemobile_apikey").removeClass("warning")}return}$("#freemobile_id,#freemobile_apikey").removeClass("warning");$(this).prop("disabled",true);$("#testFreeMobile-result").html(loading);$.get(srRoot+"/home/testFreeMobile",{freemobile_id:c.id,freemobile_apikey:c.apikey}).done(function(d){$("#testFreeMobile-result").html(d);$("#testFreeMobile").prop("disabled",false)})});$("#TraktGetPin").on("click",function(){window.open($("#trakt_pin_url").val(),"popUp","toolbar=no, scrollbars=no, resizable=no, top=200, left=200, width=650, height=550");$("#trakt_pin").removeClass("hide")});$("#trakt_pin").on("keyup change",function(){if($("#trakt_pin").val().length!==0){$("#TraktGetPin").addClass("hide");$("#authTrakt").removeClass("hide")}else{$("#TraktGetPin").removeClass("hide");$("#authTrakt").addClass("hide")}});$("#authTrakt").on("click",function(){var c={};c.pin=$("#trakt_pin").val();if(c.pin.length!==0){$.get(srRoot+"/home/getTraktToken",{trakt_pin:c.pin}).done(function(d){$("#testTrakt-result").html(d);$("#authTrakt").addClass("hide");$("#trakt_pin").addClass("hide");$("#TraktGetPin").addClass("hide")})}});$("#testTrakt").on("click",function(){var c={};c.username=$.trim($("#trakt_username").val());c.trendingBlacklist=$.trim($("#trakt_blacklist_name").val());if(!c.username){$("#testTrakt-result").html("Please fill out the necessary fields above.");if(!c.username){$("#trakt_username").addClass("warning")}else{$("#trakt_username").removeClass("warning")}return}if(/\s/g.test(c.trendingBlacklist)){$("#testTrakt-result").html("Check blacklist name; the value need to be a trakt slug");$("#trakt_blacklist_name").addClass("warning");return}$("#trakt_username").removeClass("warning");$("#trakt_blacklist_name").removeClass("warning");$(this).prop("disabled",true);$("#testTrakt-result").html(loading);$.get(srRoot+"/home/testTrakt",{username:c.username,blacklist_name:c.trendingBlacklist}).done(function(d){$("#testTrakt-result").html(d);$("#testTrakt").prop("disabled",false)})});$("#testEmail").on("click",function(){var f,k,c,h,j,e,g,d,i;f=$("#testEmail-result");f.html(loading);k=$("#email_host").val();k=k.length>0?k:null;c=$("#email_port").val();c=c.length>0?c:null;h=$("#email_tls").attr("checked")!==undefined?1:0;j=$("#email_from").val();j=j.length>0?j:"root@localhost";e=$("#email_user").val().trim();g=$("#email_password").val();d="";if(k===null){d+='<li style="color: red;">You must specify an SMTP hostname!</li>'}if(c===null){d+='<li style="color: red;">You must specify an SMTP port!</li>'}else{if(c.match(/^\d+$/)===null||parseInt(c,10)>65535){d+='<li style="color: red;">SMTP port must be between 0 and 65535!</li>'}}if(d.length>0){d="<ol>"+d+"</ol>";f.html(d)}else{i=prompt("Enter an email address to send the test to:",null);if(i===null||i.length===0||i.match(/.*@.*/)===null){f.html('<p style="color: red;">You must provide a recipient email address!</p>')}else{$.get(srRoot+"/home/testEmail",{host:k,port:c,smtp_from:j,use_tls:h,user:e,pwd:g,to:i},function(l){$("#testEmail-result").html(l)})}}});$("#testNMA").on("click",function(){var c={};c.api=$.trim($("#nma_api").val());c.priority=$("#nma_priority").val();if(!c.api){$("#testNMA-result").html("Please fill out the necessary fields above.");$("#nma_api").addClass("warning");return}$("#nma_api").removeClass("warning");$(this).prop("disabled",true);$("#testNMA-result").html(loading);$.get(srRoot+"/home/testNMA",{nma_api:c.api,nma_priority:c.priority}).done(function(d){$("#testNMA-result").html(d);$("#testNMA").prop("disabled",false)})});$("#testPushalot").on("click",function(){var c={};c.authToken=$.trim($("#pushalot_authorizationtoken").val());if(!c.authToken){$("#testPushalot-result").html("Please fill out the necessary fields above.");$("#pushalot_authorizationtoken").addClass("warning");return}$("#pushalot_authorizationtoken").removeClass("warning");$(this).prop("disabled",true);$("#testPushalot-result").html(loading);$.get(srRoot+"/home/testPushalot",{authorizationToken:c.authToken}).done(function(d){$("#testPushalot-result").html(d);$("#testPushalot").prop("disabled",false)})});$("#testPushbullet").on("click",function(){var c={};c.api=$.trim($("#pushbullet_api").val());if(!c.api){$("#testPushbullet-result").html("Please fill out the necessary fields above.");$("#pushbullet_api").addClass("warning");return}$("#pushbullet_api").removeClass("warning");$(this).prop("disabled",true);$("#testPushbullet-result").html(loading);$.get(srRoot+"/home/testPushbullet",{api:c.api}).done(function(d){$("#testPushbullet-result").html(d);$("#testPushbullet").prop("disabled",false)})});function a(d){var c={};c.api=$("#pushbullet_api").val();if(d){$("#testPushbullet-result").html(loading)}if(!c.api){$("#testPushbullet-result").html("You didn't supply a Pushbullet api key");$("#pushbullet_api").focus();return false}$.get(srRoot+"/home/getPushbulletDevices",{api:c.api},function(g){c.devices=$.parseJSON(g).devices;c.currentDevice=$("#pushbullet_device").val();$("#pushbullet_device_list").html("");for(var f=0,e=c.devices.length;f<e;f++){if(c.devices[f].active===true){if(c.currentDevice===c.devices[f].iden){$("#pushbullet_device_list").append('<option value="'+c.devices[f].iden+'" selected>'+c.devices[f].nickname+"</option>")}else{$("#pushbullet_device_list").append('<option value="'+c.devices[f].iden+'">'+c.devices[f].nickname+"</option>")}}}$("#pushbullet_device_list").prepend('<option value="" '+(c.currentDevice===""?"selected":"")+">All devices</option>");if(d){$("#testPushbullet-result").html(d)}});$("#pushbullet_device_list").on("change",function(){$("#pushbullet_device").val($("#pushbullet_device_list").val());$("#testPushbullet-result").html("Don't forget to save your new pushbullet settings.")})}$("#getPushbulletDevices").on("click",function(){a("Device list updated. Please choose a device to push to.")});a();$("#email_show").on("change",function(){var c=parseInt($("#email_show").val(),10);$.getJSON(srRoot+"/home/loadShowNotifyLists",function(d){if(d._size>0){$("#email_show_list").val(c>=0?d[c.toString()].list:"")}})});$("#prowl_show").on("change",function(){var c=parseInt($("#prowl_show").val(),10);$.getJSON(srRoot+"/home/loadShowNotifyLists",function(d){if(d._size>0){$("#prowl_show_list").val(c>=0?d[c.toString()].prowl_notify_list:"")}})});$("#email_show").on("notify",function(){b()});$("#prowl_show").on("notify",function(){b()});function b(){$.getJSON(srRoot+"/home/loadShowNotifyLists",function(g){var d,f;if(g._size===0){return}var e=[];for(f in g){if(f.charAt(0)!=="_"){e.push(g[f])}}var c=e.sort(function(i,h){if(i.name<h.name){return -1}if(i.name>h.name){return 1}return 0});d='<option value="-1">-- Select --</option>';for(f in c){if(c[f].id&&c[f].name){d+='<option value="'+c[f].id+'">'+$("<div/>").text(c[f].name).html()+"</option>"}}$("#email_show").html(d);$("#email_show_list").val("");$("#prowl_show").html(d);$("#prowl_show_list").val("")})}b();$("#email_show_save").on("click",function(){$.post(srRoot+"/home/saveShowNotifyList",{show:$("#email_show").val(),emails:$("#email_show_list").val()},function(){b()})});$("#prowl_show_save").on("click",function(){$.post(srRoot+"/home/saveShowNotifyList",{show:$("#prowl_show").val(),prowlAPIs:$("#prowl_show_list").val()},function(){b()})});$("#use_plex").on("click",function(){if($(this).is(":checked")){$(".plexinfo").removeClass("hide")}else{$(".plexinfo").addClass("hide")}})},postProcessing:function(){$("#config-components").tabs();$("#tv_download_dir").fileBrowser({title:"Select TV Download Directory"});var i=(function(){var k=0;return function(m,l){clearTimeout(k);k=setTimeout(m,l)}})();function j(){$.get(srRoot+"/config/postProcessing/isRarSupported",function(k){if(k!=="supported"){$("#unpack").qtip("option",{"content.text":"Unrar Executable not found.","style.classes":"qtip-rounded qtip-shadow qtip-red"});$("#unpack").qtip("toggle",true);$("#unpack").css("background-color","#FFFFDD")}})}function a(){var k={};k.pattern=$("#naming_pattern").val();k.multi=$("#naming_multi_ep :selected").val();k.animeType=$('input[name="naming_anime"]:checked').val();$.get(srRoot+"/config/postProcessing/testNaming",{pattern:k.pattern,anime_type:3},function(l){if(l){$("#naming_example").text(l+".ext");$("#naming_example_div").show()}else{$("#naming_example_div").hide()}});$.get(srRoot+"/config/postProcessing/testNaming",{pattern:k.pattern,multi:k.multi,anime_type:3},function(l){if(l){$("#naming_example_multi").text(l+".ext");$("#naming_example_multi_div").show()}else{$("#naming_example_multi_div").hide()}});$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:k.pattern,multi:k.multi,anime_type:k.animeType},function(l){if(l==="invalid"){$("#naming_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"});$("#naming_pattern").qtip("toggle",true);$("#naming_pattern").css("background-color","#FFDDDD")}else{if(l==="seasonfolders"){$("#naming_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"});$("#naming_pattern").qtip("toggle",true);$("#naming_pattern").css("background-color","#FFFFDD")}else{$("#naming_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"});$("#naming_pattern").qtip("toggle",false);$("#naming_pattern").css("background-color","#FFFFFF")}}})}function d(){var k=$("#naming_abd_pattern").val();$.get(srRoot+"/config/postProcessing/testNaming",{pattern:k,abd:"True"},function(l){if(l){$("#naming_abd_example").text(l+".ext");$("#naming_abd_example_div").show()}else{$("#naming_abd_example_div").hide()}});$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:k,abd:"True"},function(l){if(l==="invalid"){$("#naming_abd_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"});$("#naming_abd_pattern").qtip("toggle",true);$("#naming_abd_pattern").css("background-color","#FFDDDD")}else{if(l==="seasonfolders"){$("#naming_abd_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"});$("#naming_abd_pattern").qtip("toggle",true);$("#naming_abd_pattern").css("background-color","#FFFFDD")}else{$("#naming_abd_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"});$("#naming_abd_pattern").qtip("toggle",false);$("#naming_abd_pattern").css("background-color","#FFFFFF")}}})}function c(){var k=$("#naming_sports_pattern").val();$.get(srRoot+"/config/postProcessing/testNaming",{pattern:k,sports:"True"},function(l){if(l){$("#naming_sports_example").text(l+".ext");$("#naming_sports_example_div").show()}else{$("#naming_sports_example_div").hide()}});$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:k,sports:"True"},function(l){if(l==="invalid"){$("#naming_sports_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"});$("#naming_sports_pattern").qtip("toggle",true);$("#naming_sports_pattern").css("background-color","#FFDDDD")}else{if(l==="seasonfolders"){$("#naming_sports_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"});$("#naming_sports_pattern").qtip("toggle",true);$("#naming_sports_pattern").css("background-color","#FFFFDD")}else{$("#naming_sports_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"});$("#naming_sports_pattern").qtip("toggle",false);$("#naming_sports_pattern").css("background-color","#FFFFFF")}}})}function b(){var k={};k.pattern=$("#naming_anime_pattern").val();k.multi=$("#naming_anime_multi_ep :selected").val();k.animeType=$('input[name="naming_anime"]:checked').val();$.get(srRoot+"/config/postProcessing/testNaming",{pattern:k.pattern,anime_type:k.animeType},function(l){if(l){$("#naming_example_anime").text(l+".ext");$("#naming_example_anime_div").show()}else{$("#naming_example_anime_div").hide()}});$.get(srRoot+"/config/postProcessing/testNaming",{pattern:k.pattern,multi:k.multi,anime_type:k.animeType},function(l){if(l){$("#naming_example_multi_anime").text(l+".ext");$("#naming_example_multi_anime_div").show()}else{$("#naming_example_multi_anime_div").hide()}});$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:k.pattern,multi:k.multi,anime_type:k.animeType},function(l){if(l==="invalid"){$("#naming_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"});$("#naming_pattern").qtip("toggle",true);$("#naming_pattern").css("background-color","#FFDDDD")}else{if(l==="seasonfolders"){$("#naming_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"});$("#naming_pattern").qtip("toggle",true);$("#naming_pattern").css("background-color","#FFFFDD")}else{$("#naming_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"});$("#naming_pattern").qtip("toggle",false);$("#naming_pattern").css("background-color","#FFFFFF")}}})}function f(){if($("#name_presets :selected").val().toLowerCase()==="custom..."){$("#naming_custom").show()}else{$("#naming_custom").hide();$("#naming_pattern").val($("#name_presets :selected").attr("id"))}a()}function g(){if($("#name_abd_presets :selected").val().toLowerCase()==="custom..."){$("#naming_abd_custom").show()}else{$("#naming_abd_custom").hide();$("#naming_abd_pattern").val($("#name_abd_presets :selected").attr("id"))}d()}function h(){if($("#name_sports_presets :selected").val().toLowerCase()==="custom..."){$("#naming_sports_custom").show()}else{$("#naming_sports_custom").hide();$("#naming_sports_pattern").val($("#name_sports_presets :selected").attr("id"))}c()}function e(){if($("#name_anime_presets :selected").val().toLowerCase()==="custom..."){$("#naming_anime_custom").show()}else{$("#naming_anime_custom").hide();$("#naming_anime_pattern").val($("#name_anime_presets :selected").attr("id"))}b()}$("#unpack").on("change",function(){if(this.checked){j()}else{$("#unpack").qtip("toggle",false)}});$("#name_presets").on("change",function(){f()});$("#name_abd_presets").on("change",function(){g()});$("#naming_custom_abd").on("change",function(){g()});$("#name_sports_presets").on("change",function(){h()});$("#naming_custom_sports").on("change",function(){h()});$("#name_anime_presets").on("change",function(){e()});$("#naming_custom_anime").on("change",function(){e()});$('input[name="naming_anime"]').on("click",function(){e()});$("#naming_multi_ep").on("change",a);$("#naming_pattern").on("focusout",a);$("#naming_pattern").on("keyup",function(){i(function(){a()},500)});$("#naming_anime_multi_ep").on("change",b);$("#naming_anime_pattern").on("focusout",b);$("#naming_anime_pattern").on("keyup",function(){i(function(){b()},500)});$("#naming_abd_pattern").on("focusout",a);$("#naming_abd_pattern").on("keyup",function(){i(function(){d()},500)});$("#naming_sports_pattern").on("focusout",a);$("#naming_sports_pattern").on("keyup",function(){i(function(){c()},500)});$("#naming_anime_pattern").on("focusout",a);$("#naming_anime_pattern").on("keyup",function(){i(function(){b()},500)});$("#show_naming_key").on("click",function(){$("#naming_key").toggle()});$("#show_naming_abd_key").on("click",function(){$("#naming_abd_key").toggle()});$("#show_naming_sports_key").on("click",function(){$("#naming_sports_key").toggle()});$("#show_naming_anime_key").on("click",function(){$("#naming_anime_key").toggle()});$("#do_custom").on("click",function(){$("#naming_pattern").val($("#name_presets :selected").attr("id"));$("#naming_custom").show();$("#naming_pattern").focus()});f();g();h();e();$("#metadataType").on("change keyup",function(){$(this).showHideMetadata()});$.fn.showHideMetadata=function(){$(".metadataDiv").each(function(){var k=$(this).attr("id");var l=$("#metadataType :selected").val();if(l===k){$(this).show()}else{$(this).hide()}})};$(this).showHideMetadata();$(".metadata_checkbox").on("click",function(){$(this).refreshMetadataConfig(false)});$.fn.refreshMetadataConfig=function(m){var l=0;var k="";$(".metadataDiv").each(function(){var B=$(this).attr("id");var z=[];var s=$("#"+B+"_show_metadata").prop("checked");var t=$("#"+B+"_episode_metadata").prop("checked");var w=$("#"+B+"_fanart").prop("checked");var A=$("#"+B+"_poster").prop("checked");var y=$("#"+B+"_banner").prop("checked");var x=$("#"+B+"_episode_thumbnails").prop("checked");var n=$("#"+B+"_season_posters").prop("checked");var r=$("#"+B+"_season_banners").prop("checked");var q=$("#"+B+"_season_all_poster").prop("checked");var p=$("#"+B+"_season_all_banner").prop("checked");z.push(s?"1":"0");z.push(t?"1":"0");z.push(w?"1":"0");z.push(A?"1":"0");z.push(y?"1":"0");z.push(x?"1":"0");z.push(n?"1":"0");z.push(r?"1":"0");z.push(q?"1":"0");z.push(p?"1":"0");var o=0;for(var u=0,v=z.length;u<v;u++){o+=parseInt(z[u])}if(o>l){l=o;k=B}$("#"+B+"_eg_show_metadata").attr("class",s?"enabled":"disabled");$("#"+B+"_eg_episode_metadata").attr("class",t?"enabled":"disabled");$("#"+B+"_eg_fanart").attr("class",w?"enabled":"disabled");$("#"+B+"_eg_poster").attr("class",A?"enabled":"disabled");$("#"+B+"_eg_banner").attr("class",y?"enabled":"disabled");$("#"+B+"_eg_episode_thumbnails").attr("class",x?"enabled":"disabled");$("#"+B+"_eg_season_posters").attr("class",n?"enabled":"disabled");$("#"+B+"_eg_season_banners").attr("class",r?"enabled":"disabled");$("#"+B+"_eg_season_all_poster").attr("class",q?"enabled":"disabled");$("#"+B+"_eg_season_all_banner").attr("class",p?"enabled":"disabled");$("#"+B+"_data").val(z.join("|"))});if(k!==""&&m){$("#metadataType option[value="+k+"]").attr("selected","selected");$(this).showHideMetadata()}};$(this).refreshMetadataConfig(true);$("img[title]").qtip({position:{viewport:$(window),at:"bottom center",my:"top right"},style:{tip:{corner:true,method:"polygon"},classes:"qtip-shadow qtip-dark"}});$("i[title]").qtip({position:{viewport:$(window),at:"top center",my:"bottom center"},style:{tip:{corner:true,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}});$(".custom-pattern,#unpack").qtip({content:"validating...",show:{event:false,ready:false},hide:false,position:{viewport:$(window),at:"center left",my:"center right"},style:{tip:{corner:true,method:"polygon"},classes:"qtip-rounded qtip-shadow qtip-red"}})},search:function(){$("#config-components").tabs();$("#nzb_dir").fileBrowser({title:"Select .nzb black hole/watch location"});$("#torrent_dir").fileBrowser({title:"Select .torrent black hole/watch location"});$("#torrent_path").fileBrowser({title:"Select .torrent download location"});$.fn.nzbMethodHandler=function(){var a=$("#nzb_method :selected").val(),c="#blackhole_settings",f="#sabnzbd_settings",b="#testSABnzbd",d="#testSABnzbd_result",e="#nzbget_settings";$(c).hide();$(f).hide();$(b).hide();$(d).hide();$(e).hide();if(a.toLowerCase()==="blackhole"){$(c).show()}else{if(a.toLowerCase()==="nzbget"){$(e).show()}else{$(f).show();$(b).show();$(d).show()}}};$.torrentMethodHandler=function(){$("#options_torrent_clients").hide();$("#options_torrent_blackhole").hide();var b=$("#torrent_method :selected").val(),f=" host:port",g=" username",d=" password",a="",e="#options_torrent_blackhole",c=" RPC URL";if(b.toLowerCase()!=="blackhole"){$("#label_warning_deluge").hide();$("#label_anime_warning_deluge").hide();$("#host_desc_torrent").show();$("#torrent_verify_cert_option").hide();$("#torrent_verify_deluge").hide();$("#torrent_verify_rtorrent").hide();$("#torrent_auth_type_option").hide();$("#torrent_path_option").show();$("#torrent_path_option").find(".fileBrowser").show();$("#torrent_seed_time_option").hide();$("#torrent_high_bandwidth_option").hide();$("#torrent_label_option").show();$("#torrent_label_anime_option").show();$("#path_synology").hide();$("#torrent_paused_option").show();$("#torrent_rpcurl_option").hide();if(b.toLowerCase()==="utorrent"){a="uTorrent";$("#torrent_path_option").hide();$("#torrent_seed_time_label").text("Minimum seeding time is");$("#torrent_seed_time_option").show();$("#host_desc_torrent").text("URL to your uTorrent client (e.g. http://localhost:8000)")}else{if(b.toLowerCase()==="transmission"){a="Transmission";$("#torrent_seed_time_label").text("Stop seeding when inactive for");$("#torrent_seed_time_option").show();$("#torrent_high_bandwidth_option").show();$("#torrent_label_option").hide();$("#torrent_label_anime_option").hide();$("#torrent_rpcurl_option").show();$("#host_desc_torrent").text("URL to your Transmission client (e.g. http://localhost:9091)")}else{if(b.toLowerCase()==="deluge"){a="Deluge";$("#torrent_verify_cert_option").show();$("#torrent_verify_deluge").show();$("#torrent_verify_rtorrent").hide();$("#label_warning_deluge").show();$("#label_anime_warning_deluge").show();$("#torrent_username_option").hide();$("#torrent_username").prop("value","");$("#host_desc_torrent").text("URL to your Deluge client (e.g. http://localhost:8112)")}else{if(b.toLowerCase()==="deluged"){a="Deluge";$("#torrent_verify_cert_option").hide();$("#torrent_verify_deluge").hide();$("#torrent_verify_rtorrent").hide();$("#label_warning_deluge").show();$("#label_anime_warning_deluge").show();$("#torrent_username_option").show();$("#host_desc_torrent").text("IP or Hostname of your Deluge Daemon (e.g. scgi://localhost:58846)")}else{if(b.toLowerCase()==="download_station"){a="Synology DS";$("#torrent_label_option").hide();$("#torrent_label_anime_option").hide();$("#torrent_paused_option").hide();$("#torrent_path_option").find(".fileBrowser").hide();$("#host_desc_torrent").text("URL to your Synology DS client (e.g. http://localhost:5000)");$("#path_synology").show()}else{if(b.toLowerCase()==="rtorrent"){a="rTorrent";$("#torrent_paused_option").hide();$("#host_desc_torrent").text("URL to your rTorrent client (e.g. scgi://localhost:5000 <br> or https://localhost/rutorrent/plugins/httprpc/action.php)");$("#torrent_verify_cert_option").show();$("#torrent_verify_deluge").hide();$("#torrent_verify_rtorrent").show();$("#torrent_auth_type_option").show()}else{if(b.toLowerCase()==="qbittorrent"){a="qbittorrent";$("#torrent_path_option").hide();$("#label_warning_qbittorrent").show();$("#label_anime_warning_qbittorrent").show();$("#host_desc_torrent").text("URL to your qbittorrent client (e.g. http://localhost:8080)")}else{if(b.toLowerCase()==="mlnet"){a="mlnet";$("#torrent_path_option").hide();$("#torrent_label_option").hide();$("#torrent_verify_cert_option").hide();$("#torrent_verify_deluge").hide();$("#torrent_verify_rtorrent").hide();$("#torrent_label_anime_option").hide();$("#torrent_paused_option").hide();$("#host_desc_torrent").text("URL to your MLDonkey (e.g. http://localhost:4080)")}}}}}}}}$("#host_title").text(a+f);$("#username_title").text(a+g);$("#password_title").text(a+d);$("#torrent_client").text(a);$("#rpcurl_title").text(a+c);e="#options_torrent_clients"}$(e).show()};$("#torrent_host").on("input",function(){if($("#torrent_method :selected").val().toLowerCase()==="rtorrent"){var a=$("#torrent_host").val();var b=a.substr(0,7)==="scgi://";if(b){$("#torrent_username_option").hide();$("#torrent_username").prop("value","");$("#torrent_password_option").hide();$("#torrent_password").prop("value","");$("#torrent_auth_type_option").hide();$("#torrent_auth_type option[value=none]").attr("selected","selected")}else{$("#torrent_username_option").show();$("#torrent_password_option").show();$("#torrent_auth_type_option").show()}}});$("#nzb_method").on("change",$(this).nzbMethodHandler);$(this).nzbMethodHandler();$("#testSABnzbd").on("click",function(){var a={};$("#testSABnzbd_result").html(loading);a.host=$("#sab_host").val();a.username=$("#sab_username").val();a.password=$("#sab_password").val();a.apiKey=$("#sab_apikey").val();$.get(srRoot+"/home/testSABnzbd",{host:a.host,username:a.username,password:a.password,apikey:a.apiKey},function(b){$("#testSABnzbd_result").html(b)})});$("#torrent_method").on("change",$.torrentMethodHandler);$.torrentMethodHandler();$("#test_torrent").on("click",function(){var a={};$("#test_torrent_result").html(loading);a.method=$("#torrent_method :selected").val();a.host=$("#torrent_host").val();a.username=$("#torrent_username").val();a.password=$("#torrent_password").val();$.get(srRoot+"/home/testTorrent",{torrent_method:a.method,host:a.host,username:a.username,password:a.password},function(b){$("#test_torrent_result").html(b)})})},subtitles:function(){$.fn.showHideServices=function(){$(".serviceDiv").each(function(){var a=$(this).attr("id");var b=$("#editAService :selected").val();if(b+"Div"===a){$(this).show()}else{$(this).hide()}})};$.fn.addService=function(g,b,a,d,f,e){if(a.match("/$")===null){a=a+"/"}if($("#service_order_list > #"+g).length===0&&e!==false){var c='<li class="ui-state-default" id="'+g+'"> <input type="checkbox" id="enable_'+g+'" class="service_enabler" CHECKED> <a href="'+anonURL+a+'" class="imgLink" target="_new"><img src="'+srRoot+'/images/services/newznab.gif" alt="'+b+'" width="16" height="16"></a> '+b+"</li>";$("#service_order_list").append(c);$("#service_order_list").sortable("refresh")}};$.fn.deleteService=function(a){$("#service_order_list > #"+a).remove()};$.fn.refreshServiceList=function(){var a=$("#service_order_list").sortable("toArray");var b=[];$.each(a,function(c,e){var d=+$("#enable_"+e).prop("checked")?"1":"0";b.push(e+":"+d)});$("#service_order").val(b.join(" "))};$("#editAService").on("change",function(){$(this).showHideServices()});$(".service_enabler").on("click",function(){$(this).refreshServiceList()});$(this).showHideServices();$("#service_order_list").sortable({placeholder:"ui-state-highlight",update:function(){$(this).refreshServiceList()},create:function(){$(this).refreshServiceList()}});$("#service_order_list").disableSelection()},providers:function(){console.log("This function need to be filled with ConfigProviders.js but can't be as we've got scope issues currently.")}},home:{init:function(){},index:function(){$(".resetsorting").on("click",function(){$("table").trigger("filterReset")});$("#filterShowName").on("input",_.debounce(function(c){$(".show-grid").isotope({filter:function(){var d=$("div.show-title",this).text();return(d.toLowerCase().indexOf(c.target.value.toLowerCase())!==-1)}})},500));function a(f){var g,c,e,d;if(f<125){e=3;d=4}else{if(f<175){g=9;c=40;e=4;d=5}else{g=11;c=50;e=6;d=6}}$("#posterPopup").remove();if(g===undefined){$(".show-details").hide()}else{$(".show-details").show();$(".show-dlstats, .show-quality").css("fontSize",g);$(".show-network-image").css("width",c)}$(".show-container").css({width:f,borderWidth:d,borderRadius:e})}var b;if(typeof(Storage)!=="undefined"){b=parseInt(localStorage.getItem("posterSize"))}if(typeof(b)!=="number"||isNaN(b)){b=188}a(b);$("#posterSizeSlider").slider({min:75,max:250,value:b,change:function(d,c){if(typeof(Storage)!=="undefined"){localStorage.setItem("posterSize",c.value)}a(c.value);$(".show-grid").isotope("layout")}});$(".progressbar").each(function(){var c=$(this).data("progress-percentage");var d=c===100?100:c>80?80:c>60?60:c>40?40:20;$(this).progressbar({value:c});if($(this).data("progress-text")){$(this).append('<div class="progressbarText" title="'+$(this).data("progress-tip")+'">'+$(this).data("progress-text")+"</div>")}$(this).find(".ui-progressbar-value").addClass("progress-"+d)});$("img#network").on("error",function(){$(this).parent().text($(this).attr("alt"));$(this).remove()});$("#showListTableShows:has(tbody tr), #showListTableAnime:has(tbody tr)").tablesorter({sortList:[[7,1],[2,0]],textExtraction:{0:function(c){return $(c).find("time").attr("datetime")},1:function(c){return $(c).find("time").attr("datetime")},3:function(c){return $(c).find("span").prop("title").toLowerCase()},4:function(c){return $(c).find("span").text().toLowerCase()},5:function(c){return $(c).find("span:first").text()},6:function(c){return $(c).data("show-size")},7:function(c){return $(c).find("img").attr("alt")}},widgets:["saveSort","zebra","stickyHeaders","filter","columnSelector"],headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"quality"},5:{sorter:"eps"},6:{sorter:"digit"},7:{filter:"parsed"}},widgetOptions:{filter_columnFilters:true,filter_hideFilters:true,filter_saveFilters:true,filter_functions:{5:function(h,j,g){var i=false;var d=Math.floor((j%1)*1000);if(g===""){i=true}else{var c=g.match(/(<|<=|>=|>)\s(\d+)/i);if(c){if(c[1]==="<"){if(d<parseInt(c[2])){i=true}}else{if(c[1]==="<="){if(d<=parseInt(c[2])){i=true}}else{if(c[1]===">="){if(d>=parseInt(c[2])){i=true}}else{if(c[1]===">"){if(d>parseInt(c[2])){i=true}}}}}}c=g.match(/(\d+)\s(-|to)\s(\d+)/i);if(c){if((c[2]==="-")||(c[2]==="to")){if((d>=parseInt(c[1]))&&(d<=parseInt(c[3]))){i=true}}}c=g.match(/(=)?\s?(\d+)\s?(=)?/i);if(c){if((c[1]==="=")||(c[3]==="=")){if(parseInt(c[2])===d){i=true}}}if(!isNaN(parseFloat(g))&&isFinite(g)){if(parseInt(g)===d){i=true}}}return i}},columnSelector_mediaquery:false},sortStable:true,sortAppend:[[2,0]]});$(".show-grid").imagesLoaded(function(){$(".loading-spinner").hide();$(".show-grid").show().isotope({itemSelector:".show-container",sortBy:getMeta("sickbeard.POSTER_SORTBY"),sortAscending:getMeta("sickbeard.POSTER_SORTDIR"),layoutMode:"masonry",masonry:{isFitWidth:true},getSortData:{name:function(e){var d=$(e).attr("data-name");return(metaToBool("sickbeard.SORT_ARTICLE")?(d||""):(d||"").replace(/^(The|A|An)\s/i,""))},network:"[data-network]",date:function(e){var d=$(e).attr("data-date");return d.length&&parseInt(d,10)||Number.POSITIVE_INFINITY},progress:function(e){var d=$(e).attr("data-progress");return d.length&&parseInt(d,10)||Number.NEGATIVE_INFINITY}}});var c=null;$(".show-container").on("mouseenter",function(){var d=$(this);if(d.find(".show-details").css("display")!=="none"){return}c=setTimeout(function(){c=null;$("#posterPopup").remove();var e=d.clone().attr({id:"posterPopup"});var m=d.offset().left;var p=d.offset().top;e.css({position:"absolute",margin:0,top:p,left:m});e.find(".show-details").show();e.on("mouseleave",function(){$(this).remove()});e.zIndex(9999);e.appendTo("body");var o=438,g=250;var l=(p+d.height()/2)-(o/2);var n=(m+d.width()/2)-(g/2);var k=5;var h=$(window).scrollTop();var j=$(window).scrollLeft();var f=h+$(window).innerHeight();var i=j+$(window).innerWidth();if(l<h+k){l=h+k}if(n<j+k){n=j+k}if(l+o+k>f){l=f-o-k}if(n+g+k>i){n=i-g-k}e.animate({top:l,left:n,width:250,height:438})},300)}).on("mouseleave",function(){if(c!==null){clearTimeout(c)}})});$("#postersort").on("change",function(){$(".show-grid").isotope({sortBy:$(this).val()});$.get($(this).find("option[value="+$(this).val()+"]").attr("data-sort"))});$("#postersortdirection").on("change",function(){$(".show-grid").isotope({sortAscending:($(this).val()==="true")});$.get($(this).find("option[value="+$(this).val()+"]").attr("data-sort"))});$("#popover").popover({placement:"bottom",html:true,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#showListTableShows"),"#popover-target");if(metaToBool("sickbeard.ANIME_SPLIT_HOME")){$.tablesorter.columnSelector.attachTo($("#showListTableAnime"),"#popover-target")}})},displayShow:function(){$("#srRoot").ajaxEpSearch({colorRow:true});$("#srRoot").ajaxEpSubtitlesSearch();$("#seasonJump").on("change",function(){var e=$("#seasonJump option:selected").val();if(e&&e!=="jump"){var d=$("#seasonJump option:selected").data("season");$("html,body").animate({scrollTop:$('[name ="'+e.substring(1)+'"]').offset().top-50},"slow");$("#collapseSeason-"+d).collapse("show");location.hash=e}$(this).val("jump")});$("#prevShow").on("click",function(){$("#pickShow option:selected").prev("option").prop("selected","selected");$("#pickShow").change()});$("#nextShow").on("click",function(){$("#pickShow option:selected").next("option").prop("selected","selected");$("#pickShow").change()});$("#changeStatus").on("click",function(){var e=$("#srRoot").val();var d=[];$(".epCheck").each(function(){if(this.checked===true){d.push($(this).attr("id"))}});if(d.length===0){return false}window.location.href=e+"/home/setStatus?show="+$("#showID").attr("value")+"&eps="+d.join("|")+"&status="+$("#statusSelect").val()});$(".seasonCheck").on("click",function(){var e=this;var d=$(e).attr("id");$("#collapseSeason-"+d).collapse("show");$(".epCheck:visible").each(function(){var f=$(this).attr("id").split("x");if(f[0]===d){this.checked=e.checked}})});var b=null;$(".epCheck").on("click",function(e){if(!b||!e.shiftKey){b=this;return}var d=this;var f=0;$(".epCheck").each(function(){switch(f){case 2:return false;case 1:this.checked=b.checked}if(this===d||this===b){f++}})});$(".seriesCheck").on("click",function(){$(".epCheck:visible").each(function(){this.checked=true});$(".seasonCheck:visible").each(function(){this.checked=true})});$(".clearAll").on("click",function(){$(".epCheck:visible").each(function(){this.checked=false});$(".seasonCheck:visible").each(function(){this.checked=false})});$("#pickShow").on("change",function(){var d=$("#srRoot").val();var e=$(this).val();if(e===0){return}window.location.href=d+"/home/displayShow?show="+e});$("#checkboxControls input").on("change",function(){var d=$(this).attr("id");$(this).showHideRows(d)});$("#checkboxControls input").each(function(){var d=$(this).prop("checked");$("tr."+$(this).attr("id")).each(function(){if(d){$(this).show()}else{$(this).hide()}})});$.fn.showHideRows=function(e){var d=$("#checkboxControls > input, #"+e).prop("checked");$("tr."+e).each(function(){if(d){$(this).show()}else{$(this).hide()}});$("tr.seasonheader").each(function(){var f=0;var g=$(this).attr("id");$("tr."+g+" :visible").each(function(){f++});if(f===0){$(this).hide();$("#"+g+"-cols").hide()}else{$(this).show();$("#"+g+"-cols").show()}})};function a(h,j,g,f){var i=$("#srRoot").val();var d=$("#showID").val();var e=$("#indexer").val();if(g===""){g=null}if(f===""){f=null}$.getJSON(i+"/home/setSceneNumbering",{show:d,indexer:e,forSeason:h,forEpisode:j,sceneSeason:g,sceneEpisode:f},function(k){if(k.sceneSeason===null||k.sceneEpisode===null){$("#sceneSeasonXEpisode_"+d+"_"+h+"_"+j).val("")}else{$("#sceneSeasonXEpisode_"+d+"_"+h+"_"+j).val(k.sceneSeason+"x"+k.sceneEpisode)}if(!k.success){if(k.errorMessage){alert(k.errorMessage)}else{alert("Update failed.")}}})}function c(e,h){var g=$("#srRoot").val();var d=$("#showID").val();var f=$("#indexer").val();if(h===""){h=null}$.getJSON(g+"/home/setSceneNumbering",{show:d,indexer:f,forAbsolute:e,sceneAbsolute:h},function(i){if(i.sceneAbsolute===null){$("#sceneAbsolute_"+d+"_"+e).val("")}else{$("#sceneAbsolute_"+d+"_"+e).val(i.sceneAbsolute)}if(!i.success){if(i.errorMessage){alert(i.errorMessage)}else{alert("Update failed.")}}})}$(".sceneSeasonXEpisode").on("change",function(){$(this).val($(this).val().replace(/[^0-9xX]*/g,""));var g=$(this).attr("data-for-season");var h=$(this).attr("data-for-episode");var d=$(this).val().match(/^(\d+)x(\d+)$/i);var f=null,e=null;if(d){f=d[1];e=d[2]}a(g,h,f,e)});$(".sceneAbsolute").on("change",function(){$(this).val($(this).val().replace(/[^0-9xX]*/g,""));var e=$(this).attr("data-for-absolute");var d=$(this).val().match(/^(\d{1,3})$/i);var f=null;if(d){f=d[1]}c(e,f)});$(".addQTip").each(function(){$(this).css({cursor:"help","text-shadow":"0px 0px 0.5px #666"});$(this).qtip({show:{solo:true},position:{viewport:$(window),my:"left center",adjust:{y:-10,x:2}},style:{tip:{corner:true,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}})});$.fn.generateStars=function(){return this.each(function(d,f){$(f).html($("<span/>").width($(f).text()*12))})};$(".imdbstars").generateStars();$("#showTable, #animeTable").tablesorter({widgets:["saveSort","stickyHeaders","columnSelector"],widgetOptions:{columnSelector_saveColumns:true,columnSelector_layout:'<br><label><input type="checkbox">{name}</label>',columnSelector_mediaquery:false,columnSelector_cssChecked:"checked"}});$("#popover").popover({placement:"bottom",html:true,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#showTable, #animeTable"),"#popover-target")})},postProcess:function(){$("#episodeDir").fileBrowser({title:"Select Unprocessed Episode Folder",key:"postprocessPath"})},status:function(){$("#schedulerStatusTable").tablesorter({widgets:["saveSort","zebra"],textExtraction:{5:function(a){return $(a).data("seconds")},6:function(a){return $(a).data("seconds")}},headers:{5:{sorter:"digit"},6:{sorter:"digit"}}});$("#queueStatusTable").tablesorter({widgets:["saveSort","zebra"],sortList:[[3,0],[4,0],[2,1]]})}},manage:{init:function(){$.makeEpisodeRow=function(f,d,b,a,c){var e="";e+=' <tr class="'+$("#row_class").val()+" show-"+f+'">';e+='  <td class="tableleft" align="center"><input type="checkbox" class="'+f+'-epcheck" name="'+f+"-"+d+"x"+b+'"'+(c?" checked":"")+"></td>";e+="  <td>"+d+"x"+b+"</td>";e+='  <td class="tableright" style="width: 100%">'+a+"</td>";e+=" </tr>";return e};$.makeSubtitleRow=function(h,e,c,a,g,d){var f="";f+='<tr class="good show-'+h+'">';f+='<td align="center"><input type="checkbox" class="'+h+'-epcheck" name="'+h+"-"+e+"x"+c+'"'+(d?" checked":"")+"></td>";f+='<td style="width: 2%;">'+e+"x"+c+"</td>";if(g.length>0){f+='<td style="width: 8%;">';g=g.split(",");for(var b in g){if(g.hasOwnProperty(b)){f+='<img src="'+srRoot+"/images/subtitles/flags/"+g[b]+'.png" width="16" height="11" alt="'+g[b]+'" />&nbsp;'}}f+="</td>"}else{f+='<td style="width: 8%;">None</td>'}f+="<td>"+a+"</td>";f+="</tr>";return f}},index:function(){$(".resetsorting").on("click",function(){$("table").trigger("filterReset")});$("#massUpdateTable:has(tbody tr)").tablesorter({sortList:[[1,0]],textExtraction:{2:function(a){return $(a).find("span").text().toLowerCase()},3:function(a){return $(a).find("img").attr("alt")},4:function(a){return $(a).find("img").attr("alt")},5:function(a){return $(a).find("img").attr("alt")},6:function(a){return $(a).find("img").attr("alt")},7:function(a){return $(a).find("img").attr("alt")},8:function(a){return $(a).find("img").attr("alt")},9:function(a){return $(a).find("img").attr("alt")},},widgets:["zebra","filter","columnSelector"],headers:{0:{sorter:false,filter:false},1:{sorter:"showNames"},2:{sorter:"quality"},3:{sorter:"sports"},4:{sorter:"scene"},5:{sorter:"anime"},6:{sorter:"flatfold"},7:{sorter:"paused"},8:{sorter:"subtitle"},9:{sorter:"default_ep_status"},10:{sorter:"status"},11:{sorter:false},12:{sorter:false},13:{sorter:false},14:{sorter:false},15:{sorter:false},16:{sorter:false}},widgetOptions:{columnSelector_mediaquery:false}});$("#popover").popover({placement:"bottom",html:true,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#massUpdateTable"),"#popover-target")})},backlogOverview:function(){$("#pickShow").on("change",function(){var a=$(this).val();if(a){$("html,body").animate({scrollTop:$("#show-"+a).offset().top-25},"slow")}})},failedDownloads:function(){$("#failedTable:has(tbody tr)").tablesorter({widgets:["zebra"],sortList:[[0,0]],headers:{3:{sorter:false}}});$("#limit").on("change",function(){window.location.href=srRoot+"/manage/failedDownloads/?limit="+$(this).val()});$("#submitMassRemove").on("click",function(){var a=[];$(".removeCheck").each(function(){if(this.checked===true){a.push($(this).attr("id").split("-")[1])}});if(a.length===0){return false}window.location.href=srRoot+"/manage/failedDownloads?toRemove="+a.join("|")});if($(".removeCheck").length){$(".removeCheck").each(function(a){var b=null;$(a).click(function(d){if(!b||!d.shiftKey){b=this;return}var c=this;var e=0;$(a+":visible").each(function(){switch(e){case 2:return false;case 1:this.checked=b.checked}if(this===c||this===b){e++}})})})}},massEdit:function(){$("#location").fileBrowser({title:"Select Show Location"})},episodeStatuses:function(){$(".allCheck").on("click",function(){var a=$(this).attr("id").split("-")[1];$("."+a+"-epcheck").prop("checked",$(this).prop("checked"))});$(".get_more_eps").on("click",function(){var e=$(this).attr("id");var c=$("#allCheck-"+e).prop("checked");var b=$("tr#"+e);var a=$(this).attr("data-clicked");var d=$(this).attr("value");if(!a){$.getJSON(srRoot+"/manage/showEpisodeStatuses",{indexer_id:e,whichStatus:$("#oldStatus").val()},function(f){$.each(f,function(h,g){$.each(g,function(j,i){b.after($.makeEpisodeRow(e,h,j,i,c))})})});$(this).attr("data-clicked",1);$(this).prop("value","Collapse")}else{if(d.toLowerCase()==="collapse"){$("table tr").filter(".show-"+e).hide();$(this).prop("value","Expand")}else{if(d.toLowerCase()==="expand"){$("table tr").filter(".show-"+e).show();$(this).prop("value","Collapse")}}}});$(".selectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=true});$('input[class*="-epcheck"]').each(function(){this.checked=true})});$(".unselectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=false});$('input[class*="-epcheck"]').each(function(){this.checked=false})})},subtitleMissed:function(){$(".allCheck").on("click",function(){var a=$(this).attr("id").split("-")[1];$("."+a+"-epcheck").prop("checked",$(this).prop("checked"))});$(".get_more_eps").on("click",function(){var e=$(this).attr("id");var c=$("#allCheck-"+e).prop("checked");var b=$("tr#"+e);var a=$(this).attr("data-clicked");var d=$(this).attr("value");if(!a){$.getJSON(srRoot+"/manage/showSubtitleMissed",{indexer_id:e,whichSubs:$("#selectSubLang").val()},function(f){$.each(f,function(h,g){$.each(g,function(i,j){b.after($.makeSubtitleRow(e,h,i,j.name,j.subtitles,c))})})});$(this).attr("data-clicked",1);$(this).prop("value","Collapse")}else{if(d==="Collapse"){$("table tr").filter(".show-"+e).hide();$(this).prop("value","Expand")}else{if(d==="Expand"){$("table tr").filter(".show-"+e).show();$(this).prop("value","Collapse")}}}});$(".selectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=true});$('input[class*="-epcheck"]').each(function(){this.checked=true})});$(".unselectAllShows").on("click",function(){$(".allCheck").each(function(){this.checked=false});$('input[class*="-epcheck"]').each(function(){this.checked=false})})}},history:{init:function(){},index:function(){$("#historyTable:has(tbody tr)").tablesorter({widgets:["zebra","filter"],sortList:[[0,1]],textExtraction:(function(){if(isMeta("sickbeard.HISTORY_LAYOUT",["detailed"])){return{0:function(a){return $(a).find("time").attr("datetime")},4:function(a){return $(a).find("span").text().toLowerCase()}}}else{return{0:function(a){return $(a).find("time").attr("datetime")},1:function(a){return $(a).find("span").text().toLowerCase()},2:function(a){return $(a).attr("provider").toLowerCase()},5:function(a){return $(a).attr("quality").toLowerCase()}}}}()),headers:(function(){if(isMeta("sickbeard.HISTORY_LAYOUT",["detailed"])){return{0:{sorter:"realISODate"},4:{sorter:"quality"}}}else{return{0:{sorter:"realISODate"},4:{sorter:false},5:{sorter:"quality"}}}}())});$("#history_limit").on("change",function(){var a=srRoot+"/history/?limit="+$(this).val();window.location.href=a})}},errorlogs:{init:function(){},index:function(){},viewlogs:function(){$("#minLevel,#logFilter,#logSearch").on("keyup change",_.debounce(function(){if($("#logSearch").val().length>0){$('#logFilter option[value="<NONE>"]').prop("selected",true);$("#minLevel option[value=5]").prop("selected",true)}$("#minLevel").prop("disabled",true);$("#logFilter").prop("disabled",true);document.body.style.cursor="wait";var a=srRoot+"/errorlogs/viewlog/?minLevel="+$("select[name=minLevel]").val()+"&logFilter="+$("select[name=logFilter]").val()+"&logSearch="+$("#logSearch").val();$.get(a,function(b){history.pushState("data","",a);$("pre").html($(b).find("pre").html());$("#minLevel").prop("disabled",false);$("#logFilter").prop("disabled",false);document.body.style.cursor="default"})},500))}},schedule:{init:function(){},index:function(){if(isMeta("sickbeard.COMING_EPS_LAYOUT",["list"])){var c={date:0,show:2,network:5};var b=getMeta("sickbeard.COMING_EPS_SORT");var a=(b in c)?[[c[b],0]]:[[0,0]];$("#showListTable:has(tbody tr)").tablesorter({widgets:["stickyHeaders","filter","columnSelector","saveSort"],sortList:a,textExtraction:{0:function(d){return $(d).find("time").attr("datetime")},1:function(d){return $(d).find("time").attr("datetime")},7:function(d){return $(d).find("span").text().toLowerCase()}},headers:{0:{sorter:"realISODate"},1:{sorter:"realISODate"},2:{sorter:"loadingNames"},4:{sorter:"loadingNames"},7:{sorter:"quality"},8:{sorter:false},9:{sorter:false}},widgetOptions:{filter_columnFilters:true,filter_hideFilters:true,filter_saveFilters:true,columnSelector_mediaquery:false}});$("#srRoot").ajaxEpSearch()}if(isMeta("sickbeard.COMING_EPS_LAYOUT",["banner","poster"])){$("#srRoot").ajaxEpSearch({size:16,loadingImage:"loading16"+themeSpinner+".gif"});$(".ep_summary").hide();$(".ep_summaryTrigger").click(function(){$(this).next(".ep_summary").slideToggle("normal",function(){$(this).prev(".ep_summaryTrigger").attr("src",function(d,e){return $(this).next(".ep_summary").is(":visible")?e.replace("plus","minus"):e.replace("minus","plus")})})})}$("#popover").popover({placement:"bottom",html:true,content:'<div id="popover-target"></div>'}).on("shown.bs.popover",function(){$.tablesorter.columnSelector.attachTo($("#showListTable"),"#popover-target")})}},addShows:{init:function(){$("#tabs").tabs({collapsible:true,selected:(metaToBool("sickbeard.SORT_ARTICLE")?-1:0)});$.initRemoteShowGrid=function(){$("#showsort").val("original");$("#showsortdirection").val("asc");$("#showsort").on("change",function(){var a;switch(this.value){case"original":a="original-order";break;case"rating":$("#container").isotope({sortBy:"random"});a="rating";break;case"rating_votes":a=["rating","votes"];break;case"votes":a="votes";break;default:a="name";break}$("#container").isotope({sortBy:a})});$("#showsortdirection").on("change",function(){$("#container").isotope({sortAscending:("asc"===this.value)})});$("#traktlistselection").on("change",function(){window.location.href=srRoot+"/addShows/trendingShows/?traktList="+this.value});$("#container").imagesLoaded(function(){$("#container").isotope({sortBy:"original-order",layoutMode:"fitRows",getSortData:{name:function(b){var a=$(b).attr("data-name")||"";return(metaToBool("sickbeard.SORT_ARTICLE")?a:a.replace(/^(The|A|An)\s/i,"")).toLowerCase()},rating:"[data-rating] parseInt",votes:"[data-votes] parseInt",}})})};$.fn.loadRemoteShows=function(c,b,a){$(this).html('<img id="searchingAnim" src="'+srRoot+"/images/loading32"+themeSpinner+'.gif" height="32" width="32" />&nbsp;'+b);$(this).load(srRoot+c+" #container",function(e,d){if(d==="error"){$(this).empty().html(a)}else{$.initRemoteShowGrid()}})}},index:function(){},newShow:function(){var c=null;function b(){if(!$("#nameToSearch").val().length){return}if(c){c.abort()}var g=$("#nameToSearch").val().trim()+" on "+$("#providedIndexer option:selected").text()+" in "+$("#indexerLangSelect").val();$("#searchResults").empty().html('<img id="searchingAnim" src="'+srRoot+"/images/loading32"+themeSpinner+'.gif" height="32" width="32" /> searching '+g+"...");c=$.ajax({url:srRoot+"/addShows/searchIndexersForShowName",data:{search_term:$("#nameToSearch").val().trim(),lang:$("#indexerLangSelect").val(),indexer:$("#providedIndexer").val()},timeout:parseInt($("#indexer_timeout").val(),10)*1000,dataType:"json",error:function(){$("#searchResults").empty().html("search timed out, try again or try another indexer")},success:function(k){var h=true;var i='<fieldset>\n<legend class="legendStep">Search Results:</legend>\n';var j="";if(k.results.length===0){i+="<b>No results found, try a different search.</b>"}else{$.each(k.results,function(n,o){if(h){j=" checked";h=false}else{j=""}var p=o.join("|");i+='<input type="radio" id="whichSeries" name="whichSeries" value="'+p.replace(/"/g,"")+'"'+j+" /> ";if(k.langid&&k.langid!==""){i+='<a href="'+anonURL+o[2]+o[3]+"&lid="+k.langid+'" onclick="window.open(this.href, \'_blank\'); return false;" ><b>'+o[4]+"</b></a>"}else{i+='<a href="'+anonURL+o[2]+o[3]+'" onclick="window.open(this.href, \'_blank\'); return false;" ><b>'+o[4]+"</b></a>"}if(o[5]!==null){var l=new Date(o[5]);var m=new Date();if(l>m){i+=" (will debut on "+o[5]+")"}else{i+=" (started on "+o[5]+")"}}if(o[0]!==null){i+=" ["+o[0]+"]"}i+="<br>"});i+="</ul>"}i+="</fieldset>";$("#searchResults").html(i);f();d.loadsection(0)}})}$("#searchName").click(function(){b()});if($("#nameToSearch").length&&$("#nameToSearch").val().length){$("#searchName").click()}$("#addShowButton").click(function(){if(!$('input:radio[name="whichSeries"]:checked').val()&&!$('input:hidden[name="whichSeries"]').val().length){alert("You must choose a show to continue");return false}generateBlackWhiteList();$("#addShowForm").submit()});$("#skipShowButton").click(function(){$("#skipShow").val("1");$("#addShowForm").submit()});$("#qualityPreset").change(function(){d.loadsection(2)});var d=new formtowizard({formid:"addShowForm",revealfx:["slide",500],oninit:function(){f();if($("input:hidden[name=whichSeries]").length&&$("#fullShowPath").length){a(3)}}});function a(g){$(".step").each(function(){if($.data(this,"section")+1===g){$(this).click()}})}$("#nameToSearch").focus();function f(){var j,i;if($("input:radio[name=whichSeries]:checked").length){j=$("input:radio[name=whichSeries]:checked").val().split("|")[4]}else{if($("input:hidden[name=whichSeries]").length&&$("input:hidden[name=whichSeries]").val().length){j=$("#providedName").val()}else{j=""}}e(j);var h="Adding show <b>"+j+"</b> into <b>";if($("#rootDirs option:selected").length){var g=$("#rootDirs option:selected").val();if(g.indexOf("/")>=0){i="/"}else{if(g.indexOf("\\")>=0){i="\\"}else{i=""}}if(g.substr(h.length-1)!==i){g+=i}g+="<i>||</i>"+i;h+=g}else{if($("#fullShowPath").length&&$("#fullShowPath").val().length){h+=$("#fullShowPath").val()}else{h+="unknown dir."}}h+="</b>";if(j.length){$.get(srRoot+"/addShows/sanitizeFileName",{name:j},function(k){$("#displayText").html(h.replace("||",k))})}else{$("#displayText").html(h.replace("||","??"))}if(($("#rootDirs option:selected").length||($("#fullShowPath").length&&$("#fullShowPath").val().length))&&($("input:radio[name=whichSeries]:checked").length)||($("input:hidden[name=whichSeries]").length&&$("input:hidden[name=whichSeries]").val().length)){$("#addShowButton").attr("disabled",false)}else{$("#addShowButton").attr("disabled",true)}}$("#rootDirText").change(f);$("#searchResults").on("change","#whichSeries",f);$("#nameToSearch").keyup(function(g){if(g.keyCode===13){$("#searchName").click()}});$("#anime").change(function(){f();d.loadsection(2)});function e(g){$("#white").children().remove();$("#black").children().remove();$("#pool").children().remove();if($("#anime").prop("checked")){$("#blackwhitelist").show();if(g){$.getJSON(srRoot+"/home/fetch_releasegroups",{show_name:g},function(h){if(h.result==="success"){$.each(h.groups,function(j,l){var k=$("<option>");k.attr("value",l.name);k.html(l.name+" | "+l.rating+" | "+l.range);k.appendTo("#pool")})}})}}else{$("#blackwhitelist").hide()}}},addExistingShow:function(){$("#tableDiv").on("click","#checkAll",function(){var a=this;$(".dirCheck").each(function(){this.checked=a.checked})});$("#submitShowDirs").on("click",function(){var a=[];$(".dirCheck").each(function(){if(this.checked===true){var e=$(this).attr("id");var f=$(this).closest("tr").find("select").val();a.push(encodeURIComponent(f+"|"+e))}});if(a.length===0){return false}window.location.href=srRoot+"/addShows/addExistingShows?promptForSettings="+($("#promptForSettings").prop("checked")?"on":"off")+"&shows_to_add="+a.join("&shows_to_add=")});function d(){var a="";$(".dir_check").each(function(f,e){if($(e).is(":checked")){if(a.length){a+="&"}a+="rootDir="+encodeURIComponent($(e).attr("id"))}});$("#tableDiv").html('<img id="searchingAnim" src="'+srRoot+'/images/loading32.gif" height="32" width="32" /> loading folders...');$.get(srRoot+"/addShows/massAddTable/",a,function(e){$("#tableDiv").html(e);$("#addRootDirTable").tablesorter({widgets:["zebra"],headers:{0:{sorter:false}}})})}var c="";var b=function(){if(c===$("#rootDirText").val()){return false}else{c=$("#rootDirText").val()}$("#rootDirStaticList").html("");$("#rootDirs option").each(function(e,a){$("#rootDirStaticList").append('<li class="ui-state-default ui-corner-all"><input type="checkbox" class="cb dir_check" id="'+$(a).val()+'" checked=checked> <label for="'+$(a).val()+'"><b>'+$(a).val()+"</b></label></li>")});d()};b();$("#rootDirText").on("change",b);$("#rootDirStaticList").on("click",".dir_check",d);$("#tableDiv").on("click",".showManage",function(a){a.preventDefault();$("#tabs").tabs("option","active",0);$("html,body").animate({scrollTop:0},1000)})},recommendedShows:function(){$("#recommendedShows").loadRemoteShows("/addShows/getRecommendedShows/","Loading recommended shows...","Trakt timed out, refresh page to try again")},trendingShows:function(){var a=$("#traktList").val();$("#trendingShows").loadRemoteShows("/addShows/getTrendingShows/?traktList="+a,"Loading trending shows...","Trakt timed out, refresh page to try again")},popularShows:function(){$.initRemoteShowGrid()}}};var UTIL={exec:function(a,c){var b=SICKRAGE;c=(c===undefined)?"init":c;if(a!==""&&b[a]&&typeof b[a][c]==="function"){b[a][c]()}},init:function(){var a=document.body,b=a.getAttribute("data-controller"),c=a.getAttribute("data-action");UTIL.exec("common");UTIL.exec(b);UTIL.exec(b,c)}};if(navigator.userAgent.indexOf("PhantomJS")===-1){$(document).ready(UTIL.init)};