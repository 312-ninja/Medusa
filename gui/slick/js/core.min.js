function configSuccess(){$(".config_submitter").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show()}),$(".config_submitter_refresh").each(function(){$(this).removeAttr("disabled"),$(this).next().remove(),$(this).show(),window.location.href=srRoot+"/config/providers/"}),$("#email_show").trigger("notify")}var srRoot=getMeta("srRoot"),themeSpinner=getMeta("themeSpinner"),anonURL=getMeta("anonURL"),topImageHtml='<img src="'+srRoot+'/images/top.gif" width="31" height="11" alt="Jump to top" />',loading='<img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif" height="16" width="16" />',SICKRAGE={common:{init:function(){$("#config-components").tabs({activate:function(a,b){var c=$(this).data("lastOpenedPanel");$(this).tabs("option","selected");c||(c=$(b.oldPanel)),$(this).data("topPositionTab")||$(this).data("topPositionTab",$(b.newPanel).position().top),$(b.newPanel).hide().fadeIn(0),c&&c.toggleClass("ui-tabs-hide").css("position","absolute").css("top",$(this).data("topPositionTab")+"px").fadeOut(0,function(){$(this).css("position","")}),$(this).data("lastOpenedPanel",$(b.newPanel))}}),(navigator.maxTouchPoints||0)<2&&$(".dropdown-toggle").on("click",function(a){var b=$(this);"true"===b.attr("aria-expanded")&&(window.location.href=b.attr("href"))}),metaToBool("sickbeard.FUZZY_DATING")&&($.timeago.settings.allowFuture=!0,$.timeago.settings.strings={prefixAgo:null,prefixFromNow:"In ",suffixAgo:"ago",suffixFromNow:"",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"an hour",hours:"%d hours",day:"a day",days:"%d days",month:"a month",months:"%d months",year:"a year",years:"%d years",wordSeparator:" ",numbers:[]},$("[datetime]").timeago())}},config:{init:function(){$("#config-components").tabs(),$(".enabler").each(function(){$(this).prop("checked")||$("#content_"+$(this).attr("id")).hide()}),$(".enabler").click(function(){$(this).prop("checked")?$("#content_"+$(this).attr("id")).fadeIn("fast","linear"):$("#content_"+$(this).attr("id")).fadeOut("fast","linear")}),$(".viewIf").click(function(){$(this).prop("checked")?($(".hide_if_"+$(this).attr("id")).css("display","none"),$(".show_if_"+$(this).attr("id")).fadeIn("fast","linear")):($(".show_if_"+$(this).attr("id")).css("display","none"),$(".hide_if_"+$(this).attr("id")).fadeIn("fast","linear"))}),$(".datePresets").click(function(){var a=$("#date_presets").val();$(this).prop("checked")&&"%x"===a?(a="%a, %b %d, %Y",$("#date_use_system_default").html("1")):$(this).prop("checked")||"1"!==$("#date_use_system_default").html()||(a="%x"),$("#date_presets").attr("name","date_preset_old"),$("#date_presets").attr("id","date_presets_old"),$("#date_presets_na").attr("name","date_preset"),$("#date_presets_na").attr("id","date_presets"),$("#date_presets_old").attr("name","date_preset_na"),$("#date_presets_old").attr("id","date_presets_na"),a&&$("#date_presets").val(a)}),$("#configForm").ajaxForm({beforeSubmit:function(){$(".config_submitter .config_submitter_refresh").each(function(){$(this).attr("disabled","disabled"),$(this).after('<span><img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif"> Saving...</span>'),$(this).hide()})},success:function(){setTimeout(function(){"use strict";configSuccess()},2e3)}}),$("#api_key").click(function(){$("#api_key").select()}),$("#generate_new_apikey").click(function(){$.get(srRoot+"/config/general/generateApiKey",function(a){return void 0!==a.error?void alert(a.error):void $("#api_key").val(a)})}),$("#branchCheckout").click(function(){var a=srRoot+"/home/branchCheckout?branch="+$("#branchVersion").val(),b=srRoot+"/home/getDBcompare";$.getJSON(b,function(b){"success"===b.status&&("equal"===b.message&&(window.location.href=a),"upgrade"===b.message&&confirm("Changing branch will upgrade your database.\nYou won't be able to downgrade afterward.\nDo you want to continue?")&&(window.location.href=a),"downgrade"===b.message&&alert("Can't switch branch as this will result in a database downgrade."))})})},index:function(){0===$("input[name='proxy_setting']").val().length&&($("input[id='proxy_indexers']").prop("checked",!1),$("label[for='proxy_indexers']").hide()),$("input[name='proxy_setting']").on("input",function(){0===$(this).val().length?($("input[id='proxy_indexers']").prop("checked",!1),$("label[for='proxy_indexers']").hide()):$("label[for='proxy_indexers']").show()}),$("#log_dir").fileBrowser({title:"Select log file folder location"})},backupRestore:function(){$("#Backup").click(function(){$("#Backup").attr("disabled",!0),$("#Backup-result").html(loading);var a=$("#backupDir").val();$.get(srRoot+"/config/backuprestore/backup",{backupDir:a}).done(function(a){$("#Backup-result").html(a),$("#Backup").attr("disabled",!1)})}),$("#Restore").click(function(){$("#Restore").attr("disabled",!0),$("#Restore-result").html(loading);var a=$("#backupFile").val();$.get(srRoot+"/config/backuprestore/restore",{backupFile:a}).done(function(a){$("#Restore-result").html(a),$("#Restore").attr("disabled",!1)})}),$("#backupDir").fileBrowser({title:"Select backup folder to save to",key:"backupPath"}),$("#backupFile").fileBrowser({title:"Select backup files to restore",key:"backupFile",includeFiles:1}),$("#config-components").tabs(),$(".enabler").each(function(){$(this).prop("checked")||$("#content_"+$(this).attr("id")).hide()}),$(".enabler").click(function(){$(this).prop("checked")?$("#content_"+$(this).attr("id")).fadeIn("fast","linear"):$("#content_"+$(this).attr("id")).fadeOut("fast","linear")}),$(".viewIf").click(function(){$(this).prop("checked")?($(".hide_if_"+$(this).attr("id")).css("display","none"),$(".show_if_"+$(this).attr("id")).fadeIn("fast","linear")):($(".show_if_"+$(this).attr("id")).css("display","none"),$(".hide_if_"+$(this).attr("id")).fadeIn("fast","linear"))}),$(".datePresets").click(function(){var a=$("#date_presets").val();$(this).prop("checked")&&"%x"==a?(a="%a, %b %d, %Y",$("#date_use_system_default").html("1")):$(this).prop("checked")||"1"!=$("#date_use_system_default").html()||(a="%x"),$("#date_presets").attr("name","date_preset_old"),$("#date_presets").attr("id","date_presets_old"),$("#date_presets_na").attr("name","date_preset"),$("#date_presets_na").attr("id","date_presets"),$("#date_presets_old").attr("name","date_preset_na"),$("#date_presets_old").attr("id","date_presets_na"),a&&$("#date_presets").val(a)}),$("#configForm").ajaxForm({beforeSubmit:function(){$(".config_submitter .config_submitter_refresh").each(function(){$(this).attr("disabled","disabled"),$(this).after('<span><img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif"> Saving...</span>'),$(this).hide()})},success:function(){setTimeout(function(){"use strict";configSuccess()},2e3)}}),$("#api_key").click(function(){$("#api_key").select()}),$("#generate_new_apikey").click(function(){$.get(srRoot+"/config/general/generateApiKey",function(a){return void 0!==a.error?void alert(a.error):void $("#api_key").val(a)})}),$("#branchCheckout").click(function(){var a=srRoot+"/home/branchCheckout?branch="+$("#branchVersion").val(),b=srRoot+"/home/getDBcompare";$.getJSON(b,function(b){"success"===b.status.toLowerCase()&&("equal"===b.message.toLowerCase()&&(window.location.href=a),"upgrade"===b.message.toLowerCase()&&confirm("Changing branch will upgrade your database.\nYou won't be able to downgrade afterward.\nDo you want to continue?")&&(window.location.href=a),"downgrade"===b.message.toLowerCase()&&alert("Can't switch branch as this will result in a database downgrade."))})})},notifications:function(){function a(a){a&&$("#testPushbullet-result").html(loading);var b=$("#pushbullet_api").val();return b?($.get(srRoot+"/home/getPushbulletDevices",{api:b},function(b){var c=jQuery.parseJSON(b).devices,d=$("#pushbullet_device").val();$("#pushbullet_device_list").html("");for(var e=0,f=c.length;f>e;e++)c[e].active===!0&&(d==c[e].iden?$("#pushbullet_device_list").append('<option value="'+c[e].iden+'" selected>'+c[e].nickname+"</option>"):$("#pushbullet_device_list").append('<option value="'+c[e].iden+'">'+c[e].nickname+"</option>"));""===d?$("#pushbullet_device_list").prepend('<option value="" selected>All devices</option>'):$("#pushbullet_device_list").prepend('<option value="">All devices</option>'),a&&$("#testPushbullet-result").html(a)}),void $("#pushbullet_device_list").change(function(){$("#pushbullet_device").val($("#pushbullet_device_list").val()),$("#testPushbullet-result").html("Don't forget to save your new pushbullet settings.")})):($("#testPushbullet-result").html("You didn't supply a Pushbullet api key"),$("#pushbullet_api").focus(),!1)}function b(){$.get(srRoot+"/home/loadShowNotifyLists",function(a){var b,c,d;if(b=$.parseJSON(a),notify_data=b,0!==b._size){c='<option value="-1">-- Select --</option>';for(d in b)"_"!==d.charAt(0)&&(c+='<option value="'+b[d].id+'">'+$("<div/>").text(b[d].name).html()+"</option>");$("#email_show").html(c),$("#email_show_list").val("")}})}$("#config-components").tabs(),$("#testGrowl").click(function(){var a=$.trim($("#growl_host").val()),b=$.trim($("#growl_password").val());return a?($("#growl_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testGrowl-result").html(loading),void $.get(srRoot+"/home/testGrowl",{host:a,password:b}).done(function(a){$("#testGrowl-result").html(a),$("#testGrowl").prop("disabled",!1)})):($("#testGrowl-result").html("Please fill out the necessary fields above."),void $("#growl_host").addClass("warning"))}),$("#testProwl").click(function(){var a=$.trim($("#prowl_api").val()),b=$("#prowl_priority").val();return a?($("#prowl_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testProwl-result").html(loading),void $.get(srRoot+"/home/testProwl",{prowl_api:a,prowl_priority:b}).done(function(a){$("#testProwl-result").html(a),$("#testProwl").prop("disabled",!1)})):($("#testProwl-result").html("Please fill out the necessary fields above."),void $("#prowl_api").addClass("warning"))}),$("#testKODI").click(function(){var a=$.trim($("#kodi_host").val()),b=$.trim($("#kodi_username").val()),c=$.trim($("#kodi_password").val());return a?($("#kodi_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testKODI-result").html(loading),void $.get(srRoot+"/home/testKODI",{host:a,username:b,password:c}).done(function(a){$("#testKODI-result").html(a),$("#testKODI").prop("disabled",!1)})):($("#testKODI-result").html("Please fill out the necessary fields above."),void $("#kodi_host").addClass("warning"))}),$("#testPMC").click(function(){var a=$.trim($("#plex_host").val()),b=$.trim($("#plex_client_username").val()),c=$.trim($("#plex_client_password").val());return a?($("#plex_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPMC-result").html(loading),void $.get(srRoot+"/home/testPMC",{host:a,username:b,password:c}).done(function(a){$("#testPMC-result").html(a),$("#testPMC").prop("disabled",!1)})):($("#testPMC-result").html("Please fill out the necessary fields above."),void $("#plex_host").addClass("warning"))}),$("#testPMS").click(function(){var a=$.trim($("#plex_server_host").val()),b=$.trim($("#plex_username").val()),c=$.trim($("#plex_password").val()),d=$.trim($("#plex_server_token").val());return a?($("#plex_server_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testPMS-result").html(loading),void $.get(srRoot+"/home/testPMS",{host:a,username:b,password:c,plex_server_token:d}).done(function(a){$("#testPMS-result").html(a),$("#testPMS").prop("disabled",!1)})):($("#testPMS-result").html("Please fill out the necessary fields above."),void $("#plex_server_host").addClass("warning"))}),$("#testEMBY").click(function(){var a=$("#emby_host").val(),b=$("#emby_apikey").val();return a&&b?($("#emby_host,#emby_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testEMBY-result").html(loading),void $.get(srRoot+"/home/testEMBY",{host:a,emby_apikey:b}).done(function(a){$("#testEMBY-result").html(a),$("#testEMBY").prop("disabled",!1)})):($("#testEMBY-result").html("Please fill out the necessary fields above."),a?$("#emby_host").removeClass("warning"):$("#emby_host").addClass("warning"),void(b?$("#emby_apikey").removeClass("warning"):$("#emby_apikey").addClass("warning")))}),$("#testBoxcar").click(function(){var a=$.trim($("#boxcar_username").val());return a?($("#boxcar_username").removeClass("warning"),$(this).prop("disabled",!0),$("#testBoxcar-result").html(loading),void $.get(srRoot+"/home/testBoxcar",{username:a}).done(function(a){$("#testBoxcar-result").html(a),$("#testBoxcar").prop("disabled",!1)})):($("#testBoxcar-result").html("Please fill out the necessary fields above."),void $("#boxcar_username").addClass("warning"))}),$("#testBoxcar2").click(function(){var a=$.trim($("#boxcar2_accesstoken").val());return a?($("#boxcar2_accesstoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testBoxcar2-result").html(loading),void $.get(srRoot+"/home/testBoxcar2",{accesstoken:a}).done(function(a){$("#testBoxcar2-result").html(a),$("#testBoxcar2").prop("disabled",!1)})):($("#testBoxcar2-result").html("Please fill out the necessary fields above."),void $("#boxcar2_accesstoken").addClass("warning"))}),$("#testPushover").click(function(){var a=$("#pushover_userkey").val(),b=$("#pushover_apikey").val();return a&&b?($("#pushover_userkey,#pushover_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushover-result").html(loading),void $.get(srRoot+"/home/testPushover",{userKey:a,apiKey:b}).done(function(a){$("#testPushover-result").html(a),$("#testPushover").prop("disabled",!1)})):($("#testPushover-result").html("Please fill out the necessary fields above."),a?$("#pushover_userkey").removeClass("warning"):$("#pushover_userkey").addClass("warning"),void(b?$("#pushover_apikey").removeClass("warning"):$("#pushover_apikey").addClass("warning")))}),$("#testLibnotify").click(function(){$("#testLibnotify-result").html(loading),$.get(srRoot+"/home/testLibnotify",function(a){$("#testLibnotify-result").html(a)})}),$("#twitterStep1").click(function(){$("#testTwitter-result").html(loading),$.get(srRoot+"/home/twitterStep1",function(a){window.open(a)}).done(function(){$("#testTwitter-result").html("<b>Step1:</b> Confirm Authorization")})}),$("#twitterStep2").click(function(){var a=$.trim($("#twitter_key").val());return a?($("#twitter_key").removeClass("warning"),$("#testTwitter-result").html(loading),void $.get(srRoot+"/home/twitterStep2",{key:a},function(a){$("#testTwitter-result").html(a)})):($("#testTwitter-result").html("Please fill out the necessary fields above."),void $("#twitter_key").addClass("warning"))}),$("#testTwitter").click(function(){$.get(srRoot+"/home/testTwitter",function(a){$("#testTwitter-result").html(a)})}),$("#settingsNMJ").click(function(){if(!$("#nmj_host").val())return alert("Please fill in the Popcorn IP address"),void $("#nmj_host").focus();$("#testNMJ-result").html(loading);var a=$("#nmj_host").val();$.get(srRoot+"/home/settingsNMJ",{host:a},function(a){null===a&&($("#nmj_database").removeAttr("readonly"),$("#nmj_mount").removeAttr("readonly"));var b=$.parseJSON(a);$("#testNMJ-result").html(b.message),$("#nmj_database").val(b.database),$("#nmj_mount").val(b.mount),b.database?$("#nmj_database").attr("readonly",!0):$("#nmj_database").removeAttr("readonly"),b.mount?$("#nmj_mount").attr("readonly",!0):$("#nmj_mount").removeAttr("readonly")})}),$("#testNMJ").click(function(){var a=$.trim($("#nmj_host").val()),b=$("#nmj_database").val(),c=$("#nmj_mount").val();return a?($("#nmj_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJ-result").html(loading),void $.get(srRoot+"/home/testNMJ",{host:a,database:b,mount:c}).done(function(a){$("#testNMJ-result").html(a),$("#testNMJ").prop("disabled",!1)})):($("#testNMJ-result").html("Please fill out the necessary fields above."),void $("#nmj_host").addClass("warning"))}),$("#settingsNMJv2").click(function(){if(!$("#nmjv2_host").val())return alert("Please fill in the Popcorn IP address"),void $("#nmjv2_host").focus();$("#testNMJv2-result").html(loading);for(var a,b=$("#nmjv2_host").val(),c=document.getElementsByName("nmjv2_dbloc"),d=0,e=c.length;e>d;d++)if(c[d].checked){a=c[d].value;break}var f=$("#NMJv2db_instance").val();$.get(srRoot+"/home/settingsNMJv2",{host:b,dbloc:a,instance:f},function(a){null===a&&$("#nmjv2_database").removeAttr("readonly");var b=$.parseJSON(a);$("#testNMJv2-result").html(b.message),$("#nmjv2_database").val(b.database),b.database?$("#nmjv2_database").attr("readonly",!0):$("#nmjv2_database").removeAttr("readonly")})}),$("#testNMJv2").click(function(){var a=$.trim($("#nmjv2_host").val());return a?($("#nmjv2_host").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMJv2-result").html(loading),void $.get(srRoot+"/home/testNMJv2",{host:a}).done(function(a){$("#testNMJv2-result").html(a),$("#testNMJv2").prop("disabled",!1)})):($("#testNMJv2-result").html("Please fill out the necessary fields above."),void $("#nmjv2_host").addClass("warning"))}),$("#testFreeMobile").click(function(){var a=$.trim($("#freemobile_id").val()),b=$.trim($("#freemobile_apikey").val());return a&&b?($("#freemobile_id,#freemobile_apikey").removeClass("warning"),$(this).prop("disabled",!0),$("#testFreeMobile-result").html(loading),void $.get(srRoot+"/home/testFreeMobile",{freemobile_id:a,freemobile_apikey:b}).done(function(a){$("#testFreeMobile-result").html(a),$("#testFreeMobile").prop("disabled",!1)})):($("#testFreeMobile-result").html("Please fill out the necessary fields above."),a?$("#freemobile_id").removeClass("warning"):$("#freemobile_id").addClass("warning"),void(b?$("#freemobile_apikey").removeClass("warning"):$("#freemobile_apikey").addClass("warning")))}),$("#TraktGetPin").click(function(){var a,b=$("#trakt_pin_url").val();a=window.open(b,"popUp","toolbar=no, scrollbars=no, resizable=no, top=200, left=200, width=650, height=550"),$("#trakt_pin").removeClass("hide")}),$("#trakt_pin").on("keyup change",function(){var a=$("#trakt_pin").val();0!==a.length?($("#TraktGetPin").addClass("hide"),$("#authTrakt").removeClass("hide")):($("#TraktGetPin").removeClass("hide"),$("#authTrakt").addClass("hide"))}),$("#authTrakt").click(function(){var a=$("#trakt_pin").val();0!==a.length&&$.get(srRoot+"/home/getTraktToken",{trakt_pin:a}).done(function(a){$("#testTrakt-result").html(a),$("#authTrakt").addClass("hide"),$("#trakt_pin").addClass("hide"),$("#TraktGetPin").addClass("hide")})}),$("#testTrakt").click(function(){var a=$.trim($("#trakt_username").val()),b=$.trim($("#trakt_blacklist_name").val());return a?/\s/g.test(b)?($("#testTrakt-result").html("Check blacklist name; the value need to be a trakt slug"),void $("#trakt_blacklist_name").addClass("warning")):($("#trakt_username").removeClass("warning"),$("#trakt_blacklist_name").removeClass("warning"),$(this).prop("disabled",!0),$("#testTrakt-result").html(loading),void $.get(srRoot+"/home/testTrakt",{username:a,blacklist_name:b}).done(function(a){$("#testTrakt-result").html(a),$("#testTrakt").prop("disabled",!1)})):($("#testTrakt-result").html("Please fill out the necessary fields above."),void(a?$("#trakt_username").removeClass("warning"):$("#trakt_username").addClass("warning")))}),$("#testEmail").click(function(){var a,b,c,d,e,f,g,h,i;a=$("#testEmail-result"),a.html(loading),b=$("#email_host").val(),b=b.length>0?b:null,c=$("#email_port").val(),c=c.length>0?c:null,d=void 0!==$("#email_tls").attr("checked")?1:0,e=$("#email_from").val(),e=e.length>0?e:"root@localhost",f=$("#email_user").val().trim(),g=$("#email_password").val(),h="",null===b&&(h+='<li style="color: red;">You must specify an SMTP hostname!</li>'),null===c?h+='<li style="color: red;">You must specify an SMTP port!</li>':(null===c.match(/^\d+$/)||parseInt(c,10)>65535)&&(h+='<li style="color: red;">SMTP port must be between 0 and 65535!</li>'),h.length>0?(h="<ol>"+h+"</ol>",a.html(h)):(i=prompt("Enter an email address to send the test to:",null),null===i||0===i.length||null===i.match(/.*@.*/)?a.html('<p style="color: red;">You must provide a recipient email address!</p>'):$.get(srRoot+"/home/testEmail",{host:b,port:c,smtp_from:e,use_tls:d,user:f,pwd:g,to:i},function(a){$("#testEmail-result").html(a)}))}),$("#testNMA").click(function(){var a=$.trim($("#nma_api").val()),b=$("#nma_priority").val();return a?($("#nma_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testNMA-result").html(loading),void $.get(srRoot+"/home/testNMA",{nma_api:a,nma_priority:b}).done(function(a){$("#testNMA-result").html(a),$("#testNMA").prop("disabled",!1)})):($("#testNMA-result").html("Please fill out the necessary fields above."),void $("#nma_api").addClass("warning"))}),$("#testPushalot").click(function(){var a=$.trim($("#pushalot_authorizationtoken").val());return a?($("#pushalot_authorizationtoken").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushalot-result").html(loading),void $.get(srRoot+"/home/testPushalot",{authorizationToken:a}).done(function(a){$("#testPushalot-result").html(a),$("#testPushalot").prop("disabled",!1)})):($("#testPushalot-result").html("Please fill out the necessary fields above."),void $("#pushalot_authorizationtoken").addClass("warning"))}),$("#testPushbullet").click(function(){var a=$.trim($("#pushbullet_api").val());return a?($("#pushbullet_api").removeClass("warning"),$(this).prop("disabled",!0),$("#testPushbullet-result").html(loading),void $.get(srRoot+"/home/testPushbullet",{api:a}).done(function(a){$("#testPushbullet-result").html(a),$("#testPushbullet").prop("disabled",!1)})):($("#testPushbullet-result").html("Please fill out the necessary fields above."),void $("#pushbullet_api").addClass("warning"))}),$("#getPushbulletDevices").click(function(){a("Device list updated. Please choose a device to push to.")}),a(),$("#email_show").change(function(){var a=parseInt($("#email_show").val(),10);$("#email_show_list").val(a>=0?notify_data[a.toString()].list:"")}),$("#email_show").bind("notify",function(){b()}),b(),$("#email_show_save").click(function(){$.post(srRoot+"/home/saveShowNotifyList",{show:$("#email_show").val(),emails:$("#email_show_list").val()},function(a){b()})}),$("#use_plex").click(function(){$(this).is(":checked")?$(".plexinfo").removeClass("hide"):$(".plexinfo").addClass("hide")})},postProcessing:function(){function a(){$("#naming_pattern").val();$.get(srRoot+"/config/postProcessing/isRarSupported",function(a){"supported"!==a&&($("#unpack").qtip("option",{"content.text":"Unrar Executable not found.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#unpack").qtip("toggle",!0),$("#unpack").css("background-color","#FFFFDD"))})}function b(){var a=$("#naming_pattern").val(),b=$("#naming_multi_ep :selected").val(),c=$('input[name="naming_anime"]:checked').val();$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a,anime_type:3},function(a){a?($("#naming_example").text(a+".ext"),$("#naming_example_div").show()):$("#naming_example_div").hide()}),$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a,multi:b,anime_type:3},function(a){a?($("#naming_example_multi").text(a+".ext"),$("#naming_example_multi_div").show()):$("#naming_example_multi_div").hide()}),$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:a,multi:b,anime_type:c},function(a){"invalid"==a?($("#naming_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"==a?($("#naming_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFFFDD")):($("#naming_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_pattern").qtip("toggle",!1),$("#naming_pattern").css("background-color","#FFFFFF"))})}function c(){var a=$("#naming_abd_pattern").val();$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a,abd:"True"},function(a){a?($("#naming_abd_example").text(a+".ext"),$("#naming_abd_example_div").show()):$("#naming_abd_example_div").hide()}),$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:a,abd:"True"},function(a){"invalid"==a?($("#naming_abd_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFDDDD")):"seasonfolders"==a?($("#naming_abd_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_abd_pattern").qtip("toggle",!0),$("#naming_abd_pattern").css("background-color","#FFFFDD")):($("#naming_abd_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_abd_pattern").qtip("toggle",!1),$("#naming_abd_pattern").css("background-color","#FFFFFF"))})}function d(){var a=$("#naming_sports_pattern").val();$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a,sports:"True"},function(a){a?($("#naming_sports_example").text(a+".ext"),$("#naming_sports_example_div").show()):$("#naming_sports_example_div").hide()}),$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:a,sports:"True"},function(a){"invalid"==a?($("#naming_sports_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFDDDD")):"seasonfolders"==a?($("#naming_sports_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_sports_pattern").qtip("toggle",!0),$("#naming_sports_pattern").css("background-color","#FFFFDD")):($("#naming_sports_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_sports_pattern").qtip("toggle",!1),$("#naming_sports_pattern").css("background-color","#FFFFFF"))})}function e(){var a=$("#naming_anime_pattern").val(),b=$("#naming_anime_multi_ep :selected").val(),c=$('input[name="naming_anime"]:checked').val();$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a,anime_type:c},function(a){a?($("#naming_example_anime").text(a+".ext"),$("#naming_example_anime_div").show()):$("#naming_example_anime_div").hide()}),$.get(srRoot+"/config/postProcessing/testNaming",{pattern:a,multi:b,anime_type:c},function(a){a?($("#naming_example_multi_anime").text(a+".ext"),$("#naming_example_multi_anime_div").show()):$("#naming_example_multi_anime_div").hide()}),$.get(srRoot+"/config/postProcessing/isNamingValid",{pattern:a,multi:b,anime_type:c},function(a){"invalid"==a?($("#naming_pattern").qtip("option",{"content.text":"This pattern is invalid.","style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFDDDD")):"seasonfolders"==a?($("#naming_pattern").qtip("option",{"content.text":'This pattern would be invalid without the folders, using it will force "Flatten" off for all shows.',"style.classes":"qtip-rounded qtip-shadow qtip-red"}),$("#naming_pattern").qtip("toggle",!0),$("#naming_pattern").css("background-color","#FFFFDD")):($("#naming_pattern").qtip("option",{"content.text":"This pattern is valid.","style.classes":"qtip-rounded qtip-shadow qtip-green"}),$("#naming_pattern").qtip("toggle",!1),$("#naming_pattern").css("background-color","#FFFFFF"))})}function f(){"Custom..."==$("#name_presets :selected").val()?$("#naming_custom").show():($("#naming_custom").hide(),$("#naming_pattern").val($("#name_presets :selected").attr("id"))),b()}function g(){"Custom..."==$("#name_abd_presets :selected").val()?$("#naming_abd_custom").show():($("#naming_abd_custom").hide(),$("#naming_abd_pattern").val($("#name_abd_presets :selected").attr("id"))),c()}function h(){"Custom..."==$("#name_sports_presets :selected").val()?$("#naming_sports_custom").show():($("#naming_sports_custom").hide(),$("#naming_sports_pattern").val($("#name_sports_presets :selected").attr("id"))),d()}function i(){"Custom..."==$("#name_anime_presets :selected").val()?$("#naming_anime_custom").show():($("#naming_anime_custom").hide(),$("#naming_anime_pattern").val($("#name_anime_presets :selected").attr("id"))),e()}$("#config-components").tabs(),$("#tv_download_dir").fileBrowser({title:"Select TV Download Directory"});var j=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}();$("#unpack").on("change",function(){this.checked?a():$("#unpack").qtip("toggle",!1)}),$("#name_presets").on("change",function(){f()}),$("#name_abd_presets").on("change",function(){g()}),$("#naming_custom_abd").on("change",function(){g()}),$("#name_sports_presets").on("change",function(){h()}),$("#naming_custom_sports").on("change",function(){h()}),$("#name_anime_presets").on("change",function(){i()}),$("#naming_custom_anime").on("change",function(){i()}),$('input[name="naming_anime"]').on("click",function(){i()}),$("#naming_multi_ep").change(b),$("#naming_pattern").focusout(b),$("#naming_pattern").keyup(function(){j(function(){b()},500)}),$("#naming_anime_multi_ep").change(e),$("#naming_anime_pattern").focusout(e),$("#naming_anime_pattern").keyup(function(){j(function(){e()},500)}),$("#naming_abd_pattern").focusout(b),$("#naming_abd_pattern").keyup(function(){j(function(){c()},500)}),$("#naming_sports_pattern").focusout(b),$("#naming_sports_pattern").keyup(function(){j(function(){d()},500)}),$("#naming_anime_pattern").focusout(b),$("#naming_anime_pattern").keyup(function(){j(function(){e()},500)}),$("#show_naming_key").on("click",function(){$("#naming_key").toggle()}),$("#show_naming_abd_key").on("click",function(){$("#naming_abd_key").toggle()}),$("#show_naming_sports_key").on("click",function(){$("#naming_sports_key").toggle()}),$("#show_naming_anime_key").on("click",function(){$("#naming_anime_key").toggle()}),$("#do_custom").on("click",function(){$("#naming_pattern").val($("#name_presets :selected").attr("id")),$("#naming_custom").show(),$("#naming_pattern").focus()}),f(),g(),h(),i(),$("#metadataType").on("change keyup",function(){$(this).showHideMetadata()}),$.fn.showHideMetadata=function(){$(".metadataDiv").each(function(){var a=$(this).attr("id"),b=$("#metadataType :selected").val();b==a?$(this).show():$(this).hide()})},$(this).showHideMetadata(),$(".metadata_checkbox").on("click",function(){$(this).refreshMetadataConfig(!1)}),$.fn.refreshMetadataConfig=function(a){var b=0,c="";$(".metadataDiv").each(function(){var a=$(this).attr("id"),d=[],e=$("#"+a+"_show_metadata").prop("checked"),f=$("#"+a+"_episode_metadata").prop("checked"),g=$("#"+a+"_fanart").prop("checked"),h=$("#"+a+"_poster").prop("checked"),i=$("#"+a+"_banner").prop("checked"),j=$("#"+a+"_episode_thumbnails").prop("checked"),k=$("#"+a+"_season_posters").prop("checked"),l=$("#"+a+"_season_banners").prop("checked"),m=$("#"+a+"_season_all_poster").prop("checked"),n=$("#"+a+"_season_all_banner").prop("checked");d.push(e?"1":"0"),d.push(f?"1":"0"),d.push(g?"1":"0"),d.push(h?"1":"0"),d.push(i?"1":"0"),d.push(j?"1":"0"),d.push(k?"1":"0"),d.push(l?"1":"0"),d.push(m?"1":"0"),d.push(n?"1":"0");for(var o=0,p=0,q=d.length;q>p;p++)o+=parseInt(d[p]);o>b&&(b=o,c=a),$("#"+a+"_eg_show_metadata").attr("class",e?"enabled":"disabled"),$("#"+a+"_eg_episode_metadata").attr("class",f?"enabled":"disabled"),$("#"+a+"_eg_fanart").attr("class",g?"enabled":"disabled"),$("#"+a+"_eg_poster").attr("class",h?"enabled":"disabled"),$("#"+a+"_eg_banner").attr("class",i?"enabled":"disabled"),$("#"+a+"_eg_episode_thumbnails").attr("class",j?"enabled":"disabled"),
$("#"+a+"_eg_season_posters").attr("class",k?"enabled":"disabled"),$("#"+a+"_eg_season_banners").attr("class",l?"enabled":"disabled"),$("#"+a+"_eg_season_all_poster").attr("class",m?"enabled":"disabled"),$("#"+a+"_eg_season_all_banner").attr("class",n?"enabled":"disabled"),$("#"+a+"_data").val(d.join("|"))}),""!==c&&a&&($("#metadataType option[value="+c+"]").attr("selected","selected"),$(this).showHideMetadata())},$(this).refreshMetadataConfig(!0),$("img[title]").qtip({position:{viewport:$(window),at:"bottom center",my:"top right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-shadow qtip-dark"}}),$("i[title]").qtip({position:{viewport:$(window),at:"top center",my:"bottom center"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow ui-tooltip-sb"}}),$(".custom-pattern,#unpack").qtip({content:"validating...",show:{event:!1,ready:!1},hide:!1,position:{viewport:$(window),at:"center left",my:"center right"},style:{tip:{corner:!0,method:"polygon"},classes:"qtip-rounded qtip-shadow qtip-red"}})},search:function(){function a(){$("#use_torrents").prop("checked")?$("#no_torrents").show():$("#no_torrents").hide()}$("#config-components").tabs(),$("#nzb_dir").fileBrowser({title:"Select .nzb black hole/watch location"}),$("#torrent_dir").fileBrowser({title:"Select .torrent black hole/watch location"}),$("#torrent_path").fileBrowser({title:"Select .torrent download location"}),$.fn.nzbMethodHandler=function(){var a=$("#nzb_method :selected").val(),b="#blackhole_settings",c="#sabnzbd_settings",d="#testSABnzbd",e="#testSABnzbd_result",f="#nzbget_settings";$(b).hide(),$(c).hide(),$(d).hide(),$(e).hide(),$(f).hide(),"blackhole"===a.toLowerCase()?$(b).show():"nzbget"===a.toLowerCase()?$(f).show():($(c).show(),$(d).show(),$(e).show())},$.fn.rtorrentScgi=function(){var a=$("#torrent_method :selected").val();if("rtorrent"===a.toLowerCase()){var b=$("#torrent_host").prop("value"),c="scgi://"===b.substr(0,7);c?($("#torrent_username_option").hide(),$("#torrent_username").prop("value",""),$("#torrent_password_option").hide(),$("#torrent_password").prop("value",""),$("#torrent_auth_type_option").hide(),$("#torrent_auth_type option[value=none]").attr("selected","selected")):($("#torrent_username_option").show(),$("#torrent_password_option").show(),$("#torrent_auth_type_option").show())}},$.fn.torrentMethodHandler=function(){$("#options_torrent_clients").hide(),$("#options_torrent_blackhole").hide();var a=$("#torrent_method :selected").val(),b=" host:port",c=" username",d=" password",e="",f="#options_torrent_blackhole";if(rpcurl=" RPC URL","blackhole"!==a.toLowerCase()){var g="#label_warning_deluge",h="#label_anime_warning_deluge",i="#host_desc_rtorrent",j="#host_desc_torrent",k="#torrent_verify_cert_option",l="#torrent_path_option",m="#torrent_seed_time_option",n="#torrent_high_bandwidth_option",o="#torrent_label_option",p="#torrent_label_anime_option",q="#path_synology",r="#torrent_paused_option";$(g).hide(),$(h).hide(),$(h).hide(),$(i).hide(),$(j).show(),$(k).hide(),$(torrent_verify_deluge).hide(),$(torrent_verify_rtorrent).hide(),$(torrent_auth_type_option).hide(),$(l).show(),$(l).find(".fileBrowser").show(),$(m).hide(),$(n).hide(),$(o).show(),$(p).show(),$(q).hide(),$(r).show(),$(torrent_rpcurl_option).hide(),$(this).rtorrentScgi(),"utorrent"===a.toLowerCase()?(e="uTorrent",$(l).hide(),$("#torrent_seed_time_label").text("Minimum seeding time is"),$(m).show(),$("#host_desc_torrent").text("URL to your uTorrent client (e.g. http://localhost:8000)")):"transmission"===a.toLowerCase()?(e="Transmission",$("#torrent_seed_time_label").text("Stop seeding when inactive for"),$(m).show(),$(n).show(),$(o).hide(),$(p).hide(),$(torrent_rpcurl_option).show(),$("#host_desc_torrent").text("URL to your Transmission client (e.g. http://localhost:9091)")):"deluge"===a.toLowerCase()?(e="Deluge",$(k).show(),$(torrent_verify_deluge).show(),$(torrent_verify_rtorrent).hide(),$(g).show(),$(h).show(),$("#torrent_username_option").hide(),$("#torrent_username").prop("value",""),$("#host_desc_torrent").text("URL to your Deluge client (e.g. http://localhost:8112)")):"deluged"==a?(e="Deluge",$(k).hide(),$(torrent_verify_deluge).hide(),$(torrent_verify_rtorrent).hide(),$(g).show(),$(h).show(),$("#torrent_username_option").show(),$("#host_desc_torrent").text("IP or Hostname of your Deluge Daemon (e.g. scgi://localhost:58846)")):"download_station"==a?(e="Synology DS",$(o).hide(),$(p).hide(),$("#torrent_paused_option").hide(),$(l).find(".fileBrowser").hide(),$("#host_desc_torrent").text("URL to your Synology DS client (e.g. http://localhost:5000)"),$(q).show()):"rtorrent"==a?(e="rTorrent",$(r).hide(),$("#host_desc_torrent").text("URL to your rTorrent client (e.g. scgi://localhost:5000 <br> or https://localhost/rutorrent/plugins/httprpc/action.php)"),$(k).show(),$(torrent_verify_deluge).hide(),$(torrent_verify_rtorrent).show(),$(torrent_auth_type_option).show()):"qbittorrent"==a?(e="qbittorrent",$(l).hide(),$(o).hide(),$(p).hide(),$("#host_desc_torrent").text("URL to your qbittorrent client (e.g. http://localhost:8080)")):"mlnet"==a&&(e="mlnet",$(l).hide(),$(o).hide(),$(k).hide(),$(torrent_verify_deluge).hide(),$(torrent_verify_rtorrent).hide(),$(p).hide(),$(r).hide(),$("#host_desc_torrent").text("URL to your MLDonkey (e.g. http://localhost:4080)")),$("#host_title").text(e+b),$("#username_title").text(e+c),$("#password_title").text(e+d),$("#torrent_client").text(e),$("#rpcurl_title").text(e+rpcurl),f="#options_torrent_clients"}$(f).show()},$("#nzb_method").change($(this).nzbMethodHandler),$(this).nzbMethodHandler(),$("#testSABnzbd").click(function(){$("#testSABnzbd_result").html(loading);var a=$("#sab_host").val(),b=$("#sab_username").val(),c=$("#sab_password").val(),d=$("#sab_apikey").val();$.get(srRoot+"/home/testSABnzbd",{host:a,username:b,password:c,apikey:d},function(a){$("#testSABnzbd_result").html(a)})}),$("#torrent_method").change($(this).torrentMethodHandler),$(this).torrentMethodHandler(),$("#use_torrents").click(function(){a()}),$("#test_torrent").click(function(){$("#test_torrent_result").html(loading);var a=$("#torrent_method :selected").val(),b=$("#torrent_host").val(),c=$("#torrent_username").val(),d=$("#torrent_password").val();$.get(srRoot+"/home/testTorrent",{torrent_method:a,host:b,username:c,password:d},function(a){$("#test_torrent_result").html(a)})}),$("#torrent_host").change($(this).rtorrentScgi)},subtitles:function(){$.fn.showHideServices=function(){$(".serviceDiv").each(function(){var a=$(this).attr("id"),b=$("#editAService :selected").val();b+"Div"===a?$(this).show():$(this).hide()})},$.fn.addService=function(a,b,c,d,e,f){if(null===c.match("/$")&&(c+="/"),0===$("#service_order_list > #"+a).length&&f!==!1){var g='<li class="ui-state-default" id="'+a+'"> <input type="checkbox" id="enable_'+a+'" class="service_enabler" CHECKED> <a href="'+anonURL+c+'" class="imgLink" target="_new"><img src="'+srRoot+'/images/services/newznab.gif" alt="'+b+'" width="16" height="16"></a> '+b+"</li>";$("#service_order_list").append(g),$("#service_order_list").sortable("refresh")}},$.fn.deleteService=function(a){$("#service_order_list > #"+a).remove()},$.fn.refreshServiceList=function(){var a=$("#service_order_list").sortable("toArray"),b=[];$.each(a,function(a,c){var d=+$("#enable_"+c).prop("checked")?"1":"0";b.push(c+":"+d)}),$("#service_order").val(b.join(" "))},$("#editAService").change(function(){$(this).showHideServices()}),$(".service_enabler").on("click",function(){$(this).refreshServiceList()}),$(this).showHideServices(),$("#service_order_list").sortable({placeholder:"ui-state-highlight",update:function(){$(this).refreshServiceList()}}),$("#service_order_list").disableSelection()},providers:function(){$.fn.showHideProviders=function(){$(".providerDiv").each(function(){var a=$(this).attr("id"),b=$("#editAProvider :selected").val();b+"Div"==a?$(this).show():$(this).hide()})};var a=function(a,b){var c=!1;return a.forEach(function(a){a.name===b&&(c=!0),console.log(a.name+" while searching for: "+b)}),c};$.fn.getCategories=function(a,b){var c=b[0],d=b[1],e=b[2];if(c&&d&&e){var f={url:d,name:c,key:e};$(".updating_categories").wrapInner('<span><img src="'+srRoot+"/images/loading16"+themeSpinner+'.gif"> Updating Categories ...</span>');var g=$.getJSON(srRoot+"/config/providers/getNewznabCategories",f,function(a){$(this).updateNewznabCaps(a,b),console.debug(a.tv_categories)});g.always(function(){$(".updating_categories").empty()})}},$.fn.addProvider=function(a,c,d,e,f,g,h){if(d=$.trim(d)){/^https?:\/\//i.test(d)||(d="http://"+d),null===d.match("/$")&&(d+="/");var i=[g,[c,d,e,f]];if(b[a]=i,g||($("#editANewznabProvider").addOption(a,c),$(this).populateNewznabSection()),0===$("#provider_order_list > #"+a).length&&h!==!1){var j='<li class="ui-state-default" id="'+a+'"> <input type="checkbox" id="enable_'+a+'" class="provider_enabler" CHECKED> <a href="'+anonURL+d+'" class="imgLink" target="_new"><img src="'+srRoot+'/images/providers/newznab.png" alt="'+c+'" width="16" height="16"></a> '+c+"</li>";$("#provider_order_list").append(j),$("#provider_order_list").sortable("refresh")}$(this).makeNewznabProviderString()}},$.fn.addTorrentRssProvider=function(a,b,d,e,f){var g=[b,d,e,f];c[a]=g,$("#editATorrentRssProvider").addOption(a,b),$(this).populateTorrentRssSection(),0===$("#provider_order_list > #"+a).length&&($("#provider_order_list").append('<li class="ui-state-default" id="'+a+'"> <input type="checkbox" id="enable_'+a+'" class="provider_enabler" CHECKED> <a href="'+anonURL+d+'" class="imgLink" target="_new"><img src="'+srRoot+'/images/providers/torrentrss.png" alt="'+b+'" width="16" height="16"></a> '+b+"</li>"),$("#provider_order_list").sortable("refresh")),$(this).makeTorrentRssProviderString()},$.fn.updateProvider=function(a,c,d,e){b[a][1][1]=c,b[a][1][2]=d,b[a][1][3]=e,$(this).populateNewznabSection(),$(this).makeNewznabProviderString()},$.fn.deleteProvider=function(a){$("#editANewznabProvider").removeOption(a),delete b[a],$(this).populateNewznabSection(),$("li").remove("#"+a),$(this).makeNewznabProviderString()},$.fn.updateTorrentRssProvider=function(a,b,d,e){c[a][1]=b,c[a][2]=d,c[a][3]=e,$(this).populateTorrentRssSection(),$(this).makeTorrentRssProviderString()},$.fn.deleteTorrentRssProvider=function(a){$("#editATorrentRssProvider").removeOption(a),delete c[a],$(this).populateTorrentRssSection(),$("li").remove("#"+a),$(this).makeTorrentRssProviderString()},$.fn.populateNewznabSection=function(){var c=$("#editANewznabProvider :selected").val(),d="",e="",f="";"addNewznab"===c?(d=["","",""],e=0,$("#newznab_add_div").show(),$("#newznab_update_div").hide(),$("#newznab_cat").attr("disabled","disabled"),$("#newznab_cap").attr("disabled","disabled"),$("#newznab_cat_update").attr("disabled","disabled"),$("#newznabcapdiv").hide(),$("#newznab_cat option").each(function(){$(this).remove()}),$("#newznab_cap option").each(function(){$(this).remove()})):(d=b[c][1],e=b[c][0],$("#newznab_add_div").hide(),$("#newznab_update_div").show(),$("#newznab_cat").removeAttr("disabled"),$("#newznab_cap").removeAttr("disabled"),$("#newznab_cat_update").removeAttr("disabled"),$("#newznabcapdiv").show()),$("#newznab_name").val(d[0]),$("#newznab_url").val(d[1]),$("#newznab_key").val(d[2]),f="string"==typeof d[3]?d[3].split(","):d[3];var g=[];f&&(f.forEach(function(a){""!==a&&g.push({text:a,value:a})}),$("#newznab_cat").replaceOptions(g)),"addNewznab"===c?($("#newznab_name").removeAttr("disabled"),$("#newznab_url").removeAttr("disabled")):($("#newznab_name").attr("disabled","disabled"),e?($("#newznab_url").attr("disabled","disabled"),$("#newznab_delete").attr("disabled","disabled")):($("#newznab_url").removeAttr("disabled"),$("#newznab_delete").removeAttr("disabled"),d[0]&&d[1]&&d[2]&&!a($.fn.newznabProvidersCapabilities,d[0])&&$(this).getCategories(e,d),$(this).updateNewznabCaps(null,d)))},$.fn.updateNewznabCaps=function(b,c){b&&!a($.fn.newznabProvidersCapabilities,c[0])&&$.fn.newznabProvidersCapabilities.push({name:c[0],categories:b.tv_categories}),c[0]&&$.fn.newznabProvidersCapabilities.forEach(function(a){if(a.name&&a.name===c[0]&&a.categories instanceof Array){var b=[];a.categories.forEach(function(a){a.id&&a.name&&b.push({value:a.id,text:a.name+"("+a.id+")"})}),$("#newznab_cap").replaceOptions(b)}})},$.fn.makeNewznabProviderString=function(){var a=[];for(var c in b)b.hasOwnProperty(c)&&a.push(b[c][1].join("|"));$("#newznab_string").val(a.join("!!!"))},$.fn.populateTorrentRssSection=function(){var a=$("#editATorrentRssProvider :selected").val(),b="";"addTorrentRss"===a?(b=["","","","title"],$("#torrentrss_add_div").show(),$("#torrentrss_update_div").hide()):(b=c[a],$("#torrentrss_add_div").hide(),$("#torrentrss_update_div").show()),$("#torrentrss_name").val(b[0]),$("#torrentrss_url").val(b[1]),$("#torrentrss_cookies").val(b[2]),$("#torrentrss_titleTAG").val(b[3]),"addTorrentRss"===a?($("#torrentrss_name").removeAttr("disabled"),$("#torrentrss_url").removeAttr("disabled"),$("#torrentrss_cookies").removeAttr("disabled"),$("#torrentrss_titleTAG").removeAttr("disabled")):($("#torrentrss_name").attr("disabled","disabled"),$("#torrentrss_url").removeAttr("disabled"),$("#torrentrss_cookies").removeAttr("disabled"),$("#torrentrss_titleTAG").removeAttr("disabled"),$("#torrentrss_delete").removeAttr("disabled"))},$.fn.makeTorrentRssProviderString=function(){var a=[];for(var b in c)c.hasOwnProperty(b)&&a.push(c[b].join("|"));$("#torrentrss_string").val(a.join("!!!"))},$.fn.refreshProviderList=function(){var a=$("#provider_order_list").sortable("toArray"),b=[];$.each(a,function(a,c){var d=+$("#enable_"+c).prop("checked")?"1":"0";b.push(c+":"+d)}),$("#provider_order").val(b.join(" ")),$(this).refreshEditAProvider()},$.fn.refreshEditAProvider=function(){$("#provider-list").empty();var a=$("#provider_order_list").sortable("toArray"),b=[];if($.each(a,function(a,c){$("#enable_"+c).prop("checked")&&b.push(c)}),b.length>0){$("<select>").prop("id","editAProvider").addClass("form-control input-sm").appendTo("#provider-list");for(var c=0,d=b.length;d>c;c++){var e=b[c];$("#editAProvider").append($("<option>").prop("value",e).text($.trim($("#"+e).text()).replace(/\s\*$/,"").replace(/\s\*\*$/,"")))}}else document.getElementsByClassName("component-desc")[0].innerHTML="No providers available to configure.";$(this).showHideProviders()};var b=[],c=[];$(this).on("change",".newznab_key",function(){var a=$(this).attr("id");a=a.substring(0,a.length-"_hash".length);var b=$("#"+a+"_url").val(),c=$("#"+a+"_cat").val(),d=$(this).val();$(this).updateProvider(a,b,d,c)}),$("#newznab_key,#newznab_url").change(function(){var a=$("#editANewznabProvider :selected").val();if("addNewznab"!==a){var b=$("#newznab_url").val(),c=$("#newznab_key").val(),d=$("#newznab_cat option").map(function(a,b){return $(b).text()}).toArray().join(",");$(this).updateProvider(a,b,c,d)}}),$("#torrentrss_url,#torrentrss_cookies,#torrentrss_titleTAG").change(function(){var a=$("#editATorrentRssProvider :selected").val();if("addTorrentRss"!==a){var b=$("#torrentrss_url").val(),c=$("#torrentrss_cookies").val(),d=$("#torrentrss_titleTAG").val();$(this).updateTorrentRssProvider(a,b,c,d)}}),$("body").on("change","#editAProvider",function(){$(this).showHideProviders()}),$("#editANewznabProvider").change(function(){$(this).populateNewznabSection()}),$("#editATorrentRssProvider").change(function(){$(this).populateTorrentRssSection()}),$(this).on("click",".provider_enabler",function(){$(this).refreshProviderList()}),$("#newznab_cat_update").click(function(){console.debug("Clicked Button"),$("#newznab_cat option").each(function(){$(this).remove()});var a=[];$("#newznab_cap option:selected").each(function(){var b=$(this).val();console.debug(b),a.push({text:b,value:b})}),$("#newznab_cat").replaceOptions(a);var b=$("#editANewznabProvider :selected").val();if("addNewznab"!==b){var c=$("#newznab_url").val(),d=$("#newznab_key").val(),e=$("#newznab_cat option").map(function(a,b){return $(b).text()}).toArray().join(",");$("#newznab_cat option:not([value])").remove(),$(this).updateProvider(b,c,d,e)}}),$("#newznab_add").click(function(){var a=$.trim($("#newznab_name").val()),b=$.trim($("#newznab_url").val()),c=$.trim($("#newznab_key").val()),d=$.trim($("#newznab_cat option").map(function(a,b){return $(b).text()}).toArray().join(","));if(a&&b&&c){var e={name:a};$.getJSON(srRoot+"/config/providers/canAddNewznabProvider",e,function(e){return void 0!==e.error?void alert(e.error):void $(this).addProvider(e.success,a,b,c,d,0)})}}),$(".newznab_delete").click(function(){var a=$("#editANewznabProvider :selected").val();$(this).deleteProvider(a)}),$("#torrentrss_add").click(function(){var a=$("#torrentrss_name").val(),b=$("#torrentrss_url").val(),c=$("#torrentrss_cookies").val(),d=$("#torrentrss_titleTAG").val(),e={name:a,url:b,cookies:c,titleTAG:d};$.getJSON(srRoot+"/config/providers/canAddTorrentRssProvider",e,function(e){return void 0!==e.error?void alert(e.error):($(this).addTorrentRssProvider(e.success,a,b,c,d),void $(this).refreshEditAProvider())})}),$(".torrentrss_delete").on("click",function(){$(this).deleteTorrentRssProvider($("#editATorrentRssProvider :selected").val()),$(this).refreshEditAProvider()}),$(this).on("change","[class='providerDiv_tip'] input",function(){$("div .providerDiv [name="+$(this).attr("name")+"]").replaceWith($(this).clone()),$("div .providerDiv [newznab_name="+$(this).attr("id")+"]").replaceWith($(this).clone())}),$(this).on("change","[class='providerDiv_tip'] select",function(){$(this).find("option").each(function(){$(this).is(":selected")?$(this).prop("defaultSelected",!0):$(this).prop("defaultSelected",!1)}),$("div .providerDiv [name="+$(this).attr("name")+"]").empty().replaceWith($(this).clone())}),$(this).on("change",".enabler",function(){$(this).is(":checked")?$(".content_"+$(this).attr("id")).each(function(){$(this).show()}):$(".content_"+$(this).attr("id")).each(function(){$(this).hide()})}),$(".enabler").each(function(){$(this).is(":checked")?$(".content_"+$(this).attr("id")).show():$(".content_"+$(this).attr("id")).hide()}),$.fn.makeTorrentOptionString=function(a){var b=$(".providerDiv_tip #"+a+"_seed_ratio").prop("value"),c=$(".providerDiv_tip #"+a+"_seed_time").prop("value"),d=$(".providerDiv_tip #"+a+"_process_method").prop("value"),e=$(".providerDiv_tip #"+a+"_option_string");e.val([b,c,d].join("|"))},$(this).on("change",".seed_option",function(){var a=$(this).attr("id").split("_")[0];$(this).makeTorrentOptionString(a)}),$.fn.replaceOptions=function(a){var b,c;this.empty(),b=this,$.each(a,function(a,d){c=$("<option></option>").attr("value",d.value).text(d.text),b.append(c)})},$.fn.newznabProvidersCapabilities=[],$(this).showHideProviders(),$("#provider_order_list").sortable({placeholder:"ui-state-highlight",update:function(){$(this).refreshProviderList()}}),$("#provider_order_list").disableSelection(),$("#editANewznabProvider").length&&$(this).populateNewznabSection()}},manage:{init:function(){},show:function(){}}},UTIL={exec:function(a,b){var c=SICKRAGE;b=void 0===b?"init":b,""!==a&&c[a]&&"function"==typeof c[a][b]&&c[a][b]()},init:function(){var a=document.body,b=a.getAttribute("data-controller"),c=a.getAttribute("data-action");UTIL.exec("common"),UTIL.exec(b),UTIL.exec(b,c)}};$(document).ready(UTIL.init);